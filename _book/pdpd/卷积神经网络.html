
<!DOCTYPE HTML>
<html lang="" >
    <head>
        <meta charset="UTF-8">
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <title>卷积神经网络 · GitBook</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="description" content="">
        <meta name="generator" content="GitBook 3.2.3">
        
        
        
    
    <link rel="stylesheet" href="../gitbook/style.css">

    
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-chapter-fold/chapter-fold.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-highlight/website.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-search/search.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-fontsettings/website.css">
                
            
        

    

    
        
    
        
    
        
    
        
    
        
    
        
    

        
    
    
    <meta name="HandheldFriendly" content="true"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../gitbook/images/apple-touch-icon-precomposed-152.png">
    <link rel="shortcut icon" href="../gitbook/images/favicon.ico" type="image/x-icon">

    
    
    <link rel="prev" href="手写数字识别代码.html" />
    

    </head>
    <body>
        
<div class="book">
    <div class="book-summary">
        
            
<div id="book-search-input" role="search">
    <input type="text" placeholder="Type to search" />
</div>

            
                <nav role="navigation">
                


<ul class="summary">
    
    

    

    
        
        
    
        <li class="chapter " data-level="1.1" data-path="../">
            
                <a href="../">
            
                    
                    Introduction
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2" data-path="readme.html">
            
                <a href="readme.html">
            
                    
                    paddlepaddle
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.2.1" data-path="数据集.html">
            
                <a href="数据集.html">
            
                    
                    数据预处理
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.2" data-path="手写数字识别代码.html">
            
                <a href="手写数字识别代码.html">
            
                    
                    实现手写数字识别代码
            
                </a>
            

            
        </li>
    
        <li class="chapter active" data-level="1.2.3" data-path="卷积神经网络.html">
            
                <a href="卷积神经网络.html">
            
                    
                    卷积神经网络
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.4" >
            
                <span>
            
                    
                    图像分类
            
                </span>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.3" data-path="../ppocr/readme.html">
            
                <a href="../ppocr/readme.html">
            
                    
                    ppocr
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.3.1" data-path="../ppocr/db文本检测/readme.html">
            
                <a href="../ppocr/db文本检测/readme.html">
            
                    
                    文本检测
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.3.1.1" data-path="../ppocr/db文本检测/文本检测算法的详细实现/readme.html">
            
                <a href="../ppocr/db文本检测/文本检测算法的详细实现/readme.html">
            
                    
                    文本检测算法的详细实现
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.3.1.1.1" data-path="../ppocr/db文本检测/文本检测算法的详细实现/01DB文本检测算法原理.html">
            
                <a href="../ppocr/db文本检测/文本检测算法的详细实现/01DB文本检测算法原理.html">
            
                    
                    DB文本检测算法原理
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.1.1.2" data-path="../ppocr/db文本检测/文本检测算法的详细实现/02DB文本检测模型构建.html">
            
                <a href="../ppocr/db文本检测/文本检测算法的详细实现/02DB文本检测模型构建.html">
            
                    
                    DB文本检测算法模型构建
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.3.1.2" data-path="../ppocr/db文本检测/训练DB文字检测模型/readme.html">
            
                <a href="../ppocr/db文本检测/训练DB文字检测模型/readme.html">
            
                    
                    训练DB文本检测模型
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.3.1.2.1" data-path="../ppocr/db文本检测/训练DB文字检测模型/01图片标签生成.html">
            
                <a href="../ppocr/db文本检测/训练DB文字检测模型/01图片标签生成.html">
            
                    
                    生成图片标签
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.1.2.2" data-path="../ppocr/db文本检测/训练DB文字检测模型/02_损失函数.html">
            
                <a href="../ppocr/db文本检测/训练DB文字检测模型/02_损失函数.html">
            
                    
                    损失函数
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.1.2.3" data-path="../ppocr/db文本检测/训练DB文字检测模型/03_完整的训练集生成.html">
            
                <a href="../ppocr/db文本检测/训练DB文字检测模型/03_完整的训练集生成.html">
            
                    
                    完整训练集生成
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.1.2.4" data-path="../ppocr/db文本检测/训练DB文字检测模型/04模型构建.html">
            
                <a href="../ppocr/db文本检测/训练DB文字检测模型/04模型构建.html">
            
                    
                    模型构建
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.1.2.5" data-path="../ppocr/db文本检测/训练DB文字检测模型/05_前向传播和反向传播.html">
            
                <a href="../ppocr/db文本检测/训练DB文字检测模型/05_前向传播和反向传播.html">
            
                    
                    前向传播和反向传播
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.1.2.6" data-path="../ppocr/db文本检测/训练DB文字检测模型/06db模型后处理.html">
            
                <a href="../ppocr/db文本检测/训练DB文字检测模型/06db模型后处理.html">
            
                    
                    DB模型后处理
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.1.2.7" data-path="../ppocr/db文本检测/训练DB文字检测模型/07模型评估.html">
            
                <a href="../ppocr/db文本检测/训练DB文字检测模型/07模型评估.html">
            
                    
                    模型评估
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

            </ul>
            
        </li>
    

            </ul>
            
        </li>
    

    

    <li class="divider"></li>

    <li>
        <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
            Published with GitBook
        </a>
    </li>
</ul>


                </nav>
            
        
    </div>

    <div class="book-body">
        
            <div class="body-inner">
                
                    

<div class="book-header" role="navigation">
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href=".." >卷积神经网络</a>
    </h1>
</div>




                    <div class="page-wrapper" tabindex="-1" role="main">
                        <div class="page-inner">
                            
<div id="book-search-results">
    <div class="search-noresults">
    
                                <section class="normal markdown-section">
                                
                                <h1 id="&#x5377;&#x79EF;&#x795E;&#x7ECF;&#x7F51;&#x7EDC;">&#x5377;&#x79EF;&#x795E;&#x7ECF;&#x7F51;&#x7EDC;</h1>
<p>&#x6211;&#x76F4;&#x63A5;&#x7C98;&#x7684;&#x98DE;&#x6D46;&#x7684;&#x6587;&#x6863;&#xFF0C;&#x5199;&#x7684;&#x592A;&#x8BE6;&#x7EC6;&#x4E86;</p>
<p><a href="https://www.paddlepaddle.org.cn/tutorials/projectdetail/3106208" target="_blank">https://www.paddlepaddle.org.cn/tutorials/projectdetail/3106208</a></p>
<p>github &#x4E0D;&#x80FD;&#x6B63;&#x5E38;&#x663E;&#x793A;&#x6570;&#x5B66;&#x516C;&#x5F0F;&#xFF0C;&#x53EF;&#x4EE5;&#x4E0B;&#x8F7D;&#x4E0B;&#x6765;&#x4EE3;&#x7801;&#x7528;typora&#x6709;&#x66F4;&#x597D;&#x9605;&#x8BFB;&#x4F53;&#x9A8C;</p>
<h2 id="&#x5377;&#x79EF;&#xFF08;convolution&#xFF09;">&#x5377;&#x79EF;&#xFF08;Convolution&#xFF09;</h2>
<p>&#x8FD9;&#x4E00;&#x5C0F;&#x8282;&#x5C06;&#x4E3A;&#x8BFB;&#x8005;&#x4ECB;&#x7ECD;&#x5377;&#x79EF;&#x7B97;&#x6CD5;&#x7684;&#x539F;&#x7406;&#x548C;&#x5B9E;&#x73B0;&#x65B9;&#x6848;&#xFF0C;&#x5E76;&#x901A;&#x8FC7;&#x5177;&#x4F53;&#x7684;&#x6848;&#x4F8B;&#x5C55;&#x793A;&#x5982;&#x4F55;&#x4F7F;&#x7528;&#x5377;&#x79EF;&#x5BF9;&#x56FE;&#x7247;&#x8FDB;&#x884C;&#x64CD;&#x4F5C;&#xFF0C;&#x4E3B;&#x8981;&#x6DB5;&#x76D6;&#x5982;&#x4E0B;&#x5185;&#x5BB9;&#xFF1A;</p>
<ul>
<li>&#x5377;&#x79EF;&#x8BA1;&#x7B97;</li>
<li>&#x586B;&#x5145;&#xFF08;padding&#xFF09;</li>
<li>&#x6B65;&#x5E45;&#xFF08;stride&#xFF09;</li>
<li>&#x611F;&#x53D7;&#x91CE;&#xFF08;Receptive Field&#xFF09;</li>
<li>&#x591A;&#x8F93;&#x5165;&#x901A;&#x9053;&#x3001;&#x591A;&#x8F93;&#x51FA;&#x901A;&#x9053;&#x548C;&#x6279;&#x91CF;&#x64CD;&#x4F5C;</li>
<li>&#x98DE;&#x6868;&#x5377;&#x79EF;API&#x4ECB;&#x7ECD;</li>
<li>&#x5377;&#x79EF;&#x7B97;&#x5B50;&#x5E94;&#x7528;&#x4E3E;&#x4F8B;</li>
</ul>
<h3 id="&#x5377;&#x79EF;&#x8BA1;&#x7B97;">&#x5377;&#x79EF;&#x8BA1;&#x7B97;</h3>
<p>&#x5377;&#x79EF;&#x662F;&#x6570;&#x5B66;&#x5206;&#x6790;&#x4E2D;&#x7684;&#x4E00;&#x79CD;&#x79EF;&#x5206;&#x53D8;&#x6362;&#x7684;&#x65B9;&#x6CD5;&#xFF0C;&#x5728;&#x56FE;&#x50CF;&#x5904;&#x7406;&#x4E2D;&#x91C7;&#x7528;&#x7684;&#x662F;&#x5377;&#x79EF;&#x7684;&#x79BB;&#x6563;&#x5F62;&#x5F0F;&#x3002;&#x8FD9;&#x91CC;&#x9700;&#x8981;&#x8BF4;&#x660E;&#x7684;&#x662F;&#xFF0C;&#x5728;&#x5377;&#x79EF;&#x795E;&#x7ECF;&#x7F51;&#x7EDC;&#x4E2D;&#xFF0C;&#x5377;&#x79EF;&#x5C42;&#x7684;&#x5B9E;&#x73B0;&#x65B9;&#x5F0F;&#x5B9E;&#x9645;&#x4E0A;&#x662F;&#x6570;&#x5B66;&#x4E2D;&#x5B9A;&#x4E49;&#x7684;&#x4E92;&#x76F8;&#x5173; &#xFF08;cross-correlation&#xFF09;&#x8FD0;&#x7B97;&#xFF0C;&#x4E0E;&#x6570;&#x5B66;&#x5206;&#x6790;&#x4E2D;&#x7684;&#x5377;&#x79EF;&#x5B9A;&#x4E49;&#x6709;&#x6240;&#x4E0D;&#x540C;&#xFF0C;&#x8FD9;&#x91CC;&#x8DDF;&#x5176;&#x4ED6;&#x6846;&#x67B6;&#x548C;&#x5377;&#x79EF;&#x795E;&#x7ECF;&#x7F51;&#x7EDC;&#x7684;&#x6559;&#x7A0B;&#x4FDD;&#x6301;&#x4E00;&#x81F4;&#xFF0C;&#x90FD;&#x4F7F;&#x7528;&#x4E92;&#x76F8;&#x5173;&#x8FD0;&#x7B97;&#x4F5C;&#x4E3A;&#x5377;&#x79EF;&#x7684;&#x5B9A;&#x4E49;&#xFF0C;&#x5177;&#x4F53;&#x7684;&#x8BA1;&#x7B97;&#x8FC7;&#x7A0B;&#x5982; <strong>&#x56FE;7</strong> &#x6240;&#x793A;&#x3002;</p>
<p><img src="https://ai-studio-static-online.cdn.bcebos.com/d5019afe174745efbf7a3d3c604b9c85eeddc947f7184446a9147d128863864d" alt="img"></p>
<p>&#x56FE;7&#xFF1A;&#x5377;&#x79EF;&#x8BA1;&#x7B97;&#x8FC7;&#x7A0B;</p>
<hr>
<p><strong>&#x8BF4;&#x660E;&#xFF1A;</strong></p>
<p>&#x5377;&#x79EF;&#x6838;&#xFF08;kernel&#xFF09;&#x4E5F;&#x88AB;&#x53EB;&#x505A;&#x6EE4;&#x6CE2;&#x5668;&#xFF08;filter&#xFF09;&#xFF0C;&#x5047;&#x8BBE;&#x5377;&#x79EF;&#x6838;&#x7684;&#x9AD8;&#x548C;&#x5BBD;&#x5206;&#x522B;&#x4E3A;$k_h$&#x548C;$k_w$&#xFF0C;&#x5219;&#x5C06;&#x79F0;&#x4E3A;$k_h&#xD7;k_w$&#x5377;&#x79EF;&#xFF0C;&#x6BD4;&#x5982;3&#xD7;5&#x5377;&#x79EF;&#xFF0C;&#x5C31;&#x662F;&#x6307;&#x5377;&#x79EF;&#x6838;&#x7684;&#x9AD8;&#x4E3A;3, &#x5BBD;&#x4E3A;5&#x3002;</p>
<ul>
<li>&#x5982;&#x56FE;7&#xFF08;a&#xFF09;&#x6240;&#x793A;&#xFF1A;&#x5DE6;&#x8FB9;&#x7684;&#x56FE;&#x5927;&#x5C0F;&#x662F;3&#xD7;3&#xFF0C;&#x8868;&#x793A;&#x8F93;&#x5165;&#x6570;&#x636E;&#x662F;&#x4E00;&#x4E2A;&#x7EF4;&#x5EA6;&#x4E3A;3&#xD7;3&#x7684;&#x4E8C;&#x7EF4;&#x6570;&#x7EC4;&#xFF1B;&#x4E2D;&#x95F4;&#x7684;&#x56FE;&#x5927;&#x5C0F;&#x662F;2&#xD7;2&#xFF0C;&#x8868;&#x793A;&#x4E00;&#x4E2A;&#x7EF4;&#x5EA6;&#x4E3A;2&#xD7;2&#x7684;&#x4E8C;&#x7EF4;&#x6570;&#x7EC4;&#xFF0C;&#x6211;&#x4EEC;&#x5C06;&#x8FD9;&#x4E2A;&#x4E8C;&#x7EF4;&#x6570;&#x7EC4;&#x79F0;&#x4E3A;&#x5377;&#x79EF;&#x6838;&#x3002;&#x5148;&#x5C06;&#x5377;&#x79EF;&#x6838;&#x7684;&#x5DE6;&#x4E0A;&#x89D2;&#x4E0E;&#x8F93;&#x5165;&#x6570;&#x636E;&#x7684;&#x5DE6;&#x4E0A;&#x89D2;&#xFF08;&#x5373;&#xFF1A;&#x8F93;&#x5165;&#x6570;&#x636E;&#x7684;(0, 0)&#x4F4D;&#x7F6E;&#xFF09;&#x5BF9;&#x9F50;&#xFF0C;&#x628A;&#x5377;&#x79EF;&#x6838;&#x7684;&#x6BCF;&#x4E2A;&#x5143;&#x7D20;&#x8DDF;&#x5176;&#x4F4D;&#x7F6E;&#x5BF9;&#x5E94;&#x7684;&#x8F93;&#x5165;&#x6570;&#x636E;&#x4E2D;&#x7684;&#x5143;&#x7D20;&#x76F8;&#x4E58;&#xFF0C;&#x518D;&#x628A;&#x6240;&#x6709;&#x4E58;&#x79EF;&#x76F8;&#x52A0;&#xFF0C;&#x5F97;&#x5230;&#x5377;&#x79EF;&#x8F93;&#x51FA;&#x7684;&#x7B2C;&#x4E00;&#x4E2A;&#x7ED3;&#x679C;&#xFF1A;</li>
</ul>
<p>$$
0&#xD7;1+1&#xD7;2+2&#xD7;4+3&#xD7;5=25     \quad \quad (a)</p>
<p>$$</p>
<ul>
<li>&#x5982;&#x56FE;7&#xFF08;b&#xFF09;&#x6240;&#x793A;&#xFF1A;&#x5C06;&#x5377;&#x79EF;&#x6838;&#x5411;&#x53F3;&#x6ED1;&#x52A8;&#xFF0C;&#x8BA9;&#x5377;&#x79EF;&#x6838;&#x5DE6;&#x4E0A;&#x89D2;&#x4E0E;&#x8F93;&#x5165;&#x6570;&#x636E;&#x4E2D;&#x7684;(0,1)&#x4F4D;&#x7F6E;&#x5BF9;&#x9F50;&#xFF0C;&#x540C;&#x6837;&#x5C06;&#x5377;&#x79EF;&#x6838;&#x7684;&#x6BCF;&#x4E2A;&#x5143;&#x7D20;&#x8DDF;&#x5176;&#x4F4D;&#x7F6E;&#x5BF9;&#x5E94;&#x7684;&#x8F93;&#x5165;&#x6570;&#x636E;&#x4E2D;&#x7684;&#x5143;&#x7D20;&#x76F8;&#x4E58;&#xFF0C;&#x518D;&#x628A;&#x8FD9;4&#x4E2A;&#x4E58;&#x79EF;&#x76F8;&#x52A0;&#xFF0C;&#x5F97;&#x5230;&#x5377;&#x79EF;&#x8F93;&#x51FA;&#x7684;&#x7B2C;&#x4E8C;&#x4E2A;&#x7ED3;&#x679C;&#xFF1A;</li>
</ul>
<p>$$
0&#xD7;2+1&#xD7;3+2&#xD7;5+3&#xD7;6=31  \quad \quad    (b)</p>
<p>$$</p>
<ul>
<li>&#x5982;&#x56FE;7&#xFF08;c&#xFF09;&#x6240;&#x793A;&#xFF1A;&#x5C06;&#x5377;&#x79EF;&#x6838;&#x5411;&#x4E0B;&#x6ED1;&#x52A8;&#xFF0C;&#x8BA9;&#x5377;&#x79EF;&#x6838;&#x5DE6;&#x4E0A;&#x89D2;&#x4E0E;&#x8F93;&#x5165;&#x6570;&#x636E;&#x4E2D;&#x7684;(1, 0)&#x4F4D;&#x7F6E;&#x5BF9;&#x9F50;&#xFF0C;&#x53EF;&#x4EE5;&#x8BA1;&#x7B97;&#x5F97;&#x5230;&#x5377;&#x79EF;&#x8F93;&#x51FA;&#x7684;&#x7B2C;&#x4E09;&#x4E2A;&#x7ED3;&#x679C;&#xFF1A;</li>
</ul>
<p>$$
0&#xD7;4+1&#xD7;5+2&#xD7;7+3&#xD7;8=43  \quad \quad   (c)</p>
<p>$$</p>
<ul>
<li>&#x5982;&#x56FE;7&#xFF08;d&#xFF09;&#x6240;&#x793A;&#xFF1A;&#x5C06;&#x5377;&#x79EF;&#x6838;&#x5411;&#x53F3;&#x6ED1;&#x52A8;&#xFF0C;&#x8BA9;&#x5377;&#x79EF;&#x6838;&#x5DE6;&#x4E0A;&#x89D2;&#x4E0E;&#x8F93;&#x5165;&#x6570;&#x636E;&#x4E2D;&#x7684;(1, 1)&#x4F4D;&#x7F6E;&#x5BF9;&#x9F50;&#xFF0C;&#x53EF;&#x4EE5;&#x8BA1;&#x7B97;&#x5F97;&#x5230;&#x5377;&#x79EF;&#x8F93;&#x51FA;&#x7684;&#x7B2C;&#x56DB;&#x4E2A;&#x7ED3;&#x679C;&#xFF1A;</li>
</ul>
<p>$$
0&#xD7;5+1&#xD7;6+2&#xD7;8+3&#xD7;9=49   \quad \quad (d)</p>
<p>$$</p>
<p>&#x5377;&#x79EF;&#x6838;&#x7684;&#x8BA1;&#x7B97;&#x8FC7;&#x7A0B;&#x53EF;&#x4EE5;&#x7528;&#x4E0B;&#x9762;&#x7684;&#x6570;&#x5B66;&#x516C;&#x5F0F;&#x8868;&#x793A;&#xFF0C;&#x5176;&#x4E2D; $a$&#x4EE3;&#x8868;&#x8F93;&#x5165;&#x56FE;&#x7247;&#xFF0C; $b$&#x4EE3;&#x8868;&#x8F93;&#x51FA;&#x7279;&#x5F81;&#x56FE;&#xFF0C;$w$ &#x662F;&#x5377;&#x79EF;&#x6838;&#x53C2;&#x6570;&#xFF0C;&#x5B83;&#x4EEC;&#x90FD;&#x662F;&#x4E8C;&#x7EF4;&#x6570;&#x7EC4;&#xFF0C;$\sum u,v$&#x8868;&#x793A;&#x5BF9;&#x5377;&#x79EF;&#x6838;&#x53C2;&#x6570;&#x8FDB;&#x884C;&#x904D;&#x5386;&#x5E76;&#x6C42;&#x548C;&#x3002;</p>
<p>$b[i,j]=\sum_{u,v}a[i+u,j+v]\cdot w[u,v]$</p>
<p>&#x4E3E;&#x4F8B;&#x8BF4;&#x660E;&#xFF0C;&#x5047;&#x5982;&#x4E0A;&#x56FE;&#x4E2D;&#x5377;&#x79EF;&#x6838;&#x5927;&#x5C0F;&#x662F;2&#xD7;2&#xFF0C;&#x5219;$u,v$&#x53EF;&#x4EE5;&#x53D6;0&#x548C;1&#x4E5F;&#x5C31;&#x662F;&#x8BF4;&#xFF1A;</p>
<p>$$
b[i, j] = a[i+0, j+0]\cdot w[0, 0] + a[i+0, j+1]\cdot w[0, 1] + a[i+1, j+0]\cdot w[1, 0] + a[i+1, j+1]\cdot w[1, 1]</p>
<p>$$
&#x8BFB;&#x8005;&#x53EF;&#x4EE5;&#x81EA;&#x884C;&#x9A8C;&#x8BC1;&#xFF0C;&#x5F53;[i,j][i, j][<em>i</em>,<em>j</em>]&#x53D6;&#x4E0D;&#x540C;&#x503C;&#x65F6;&#xFF0C;&#x6839;&#x636E;&#x6B64;&#x516C;&#x5F0F;&#x8BA1;&#x7B97;&#x7684;&#x7ED3;&#x679C;&#x4E0E;&#x4E0A;&#x56FE;&#x4E2D;&#x7684;&#x4F8B;&#x5B50;&#x662F;&#x5426;&#x4E00;&#x81F4;&#x3002;</p>
<p><strong>&#x5176;&#x5B83;&#x8BF4;&#x660E;&#xFF1A;</strong></p>
<p>&#x5728;&#x5377;&#x79EF;&#x795E;&#x7ECF;&#x7F51;&#x7EDC;&#x4E2D;&#xFF0C;&#x4E00;&#x4E2A;&#x5377;&#x79EF;&#x7B97;&#x5B50;&#x9664;&#x4E86;&#x4E0A;&#x9762;&#x63CF;&#x8FF0;&#x7684;&#x5377;&#x79EF;&#x8FC7;&#x7A0B;&#x4E4B;&#x5916;&#xFF0C;&#x8FD8;&#x5305;&#x62EC;&#x52A0;&#x4E0A;&#x504F;&#x7F6E;&#x9879;&#x7684;&#x64CD;&#x4F5C;&#x3002;&#x4F8B;&#x5982;&#x5047;&#x8BBE;&#x504F;&#x7F6E;&#x4E3A;1&#xFF0C;&#x5219;&#x4E0A;&#x9762;&#x5377;&#x79EF;&#x8BA1;&#x7B97;&#x7684;&#x7ED3;&#x679C;&#x4E3A;&#xFF1A;</p>
<p>0&#xD7;1+1&#xD7;2+2&#xD7;4+3&#xD7;5 +1=26</p>
<p>0&#xD7;2+1&#xD7;3+2&#xD7;5+3&#xD7;6 +1=32</p>
<p>0&#xD7;4+1&#xD7;5+2&#xD7;7+3&#xD7;8 +1=44</p>
<p>0&#xD7;5+1&#xD7;6+2&#xD7;8+3&#xD7;9 +1=50</p>
<h3 id="&#x586B;&#x5145;&#xFF08;padding&#xFF09;">&#x586B;&#x5145;&#xFF08;padding&#xFF09;</h3>
<p>&#x5728;&#x4E0A;&#x9762;&#x7684;&#x4F8B;&#x5B50;&#x4E2D;&#xFF0C;&#x8F93;&#x5165;&#x56FE;&#x7247;&#x5C3A;&#x5BF8;&#x4E3A;3&#xD7;3&#xFF0C;&#x8F93;&#x51FA;&#x56FE;&#x7247;&#x5C3A;&#x5BF8;&#x4E3A;2&#xD7;2&#xFF0C;&#x7ECF;&#x8FC7;&#x4E00;&#x6B21;&#x5377;&#x79EF;&#x4E4B;&#x540E;&#xFF0C;&#x56FE;&#x7247;&#x5C3A;&#x5BF8;&#x53D8;&#x5C0F;&#x3002;&#x5377;&#x79EF;&#x8F93;&#x51FA;&#x7279;&#x5F81;&#x56FE;&#x7684;&#x5C3A;&#x5BF8;&#x8BA1;&#x7B97;&#x65B9;&#x6CD5;&#x5982;&#x4E0B;&#xFF08;&#x5377;&#x79EF;&#x6838;&#x7684;&#x9AD8;&#x548C;&#x5BBD;&#x5206;&#x522B;&#x4E3A;$k_h$&#x548C;$k_w$&#xFF09;&#xFF1A;</p>
<p>$$
H<em>{out} = H - k_h +1  \
W</em>{out} = W - k_w +1</p>
<p>$$
&#x5982;&#x679C;&#x8F93;&#x5165;&#x5C3A;&#x5BF8;&#x4E3A;4&#xFF0C;&#x5377;&#x79EF;&#x6838;&#x5927;&#x5C0F;&#x4E3A;3&#x65F6;&#xFF0C;&#x8F93;&#x51FA;&#x5C3A;&#x5BF8;&#x4E3A;4&#x2212;3+1=24-3+1=24&#x2212;3+1=2&#x3002;&#x8BFB;&#x8005;&#x53EF;&#x4EE5;&#x81EA;&#x884C;&#x68C0;&#x67E5;&#x5F53;&#x8F93;&#x5165;&#x56FE;&#x7247;&#x548C;&#x5377;&#x79EF;&#x6838;&#x4E3A;&#x5176;&#x4ED6;&#x5C3A;&#x5BF8;&#x65F6;&#xFF0C;&#x4E0A;&#x8FF0;&#x8BA1;&#x7B97;&#x5F0F;&#x662F;&#x5426;&#x6210;&#x7ACB;&#x3002;&#x5F53;&#x5377;&#x79EF;&#x6838;&#x5C3A;&#x5BF8;&#x5927;&#x4E8E;1&#x65F6;&#xFF0C;&#x8F93;&#x51FA;&#x7279;&#x5F81;&#x56FE;&#x7684;&#x5C3A;&#x5BF8;&#x4F1A;&#x5C0F;&#x4E8E;&#x8F93;&#x5165;&#x56FE;&#x7247;&#x5C3A;&#x5BF8;&#x3002;&#x5982;&#x679C;&#x7ECF;&#x8FC7;&#x591A;&#x6B21;&#x5377;&#x79EF;&#xFF0C;&#x8F93;&#x51FA;&#x56FE;&#x7247;&#x5C3A;&#x5BF8;&#x4F1A;&#x4E0D;&#x65AD;&#x51CF;&#x5C0F;&#x3002;&#x4E3A;&#x4E86;&#x907F;&#x514D;&#x5377;&#x79EF;&#x4E4B;&#x540E;&#x56FE;&#x7247;&#x5C3A;&#x5BF8;&#x53D8;&#x5C0F;&#xFF0C;&#x901A;&#x5E38;&#x4F1A;&#x5728;&#x56FE;&#x7247;&#x7684;&#x5916;&#x56F4;&#x8FDB;&#x884C;&#x586B;&#x5145;(padding)&#xFF0C;&#x5982; <strong>&#x56FE;8</strong> &#x6240;&#x793A;&#x3002;</p>
<p><img src="https://ai-studio-static-online.cdn.bcebos.com/01d311ec2c65435f85059953a84ec7ea8ef2fd236452450e912346a7da201c5f" alt="img"></p>
<p>&#x56FE;8&#xFF1A;&#x56FE;&#x5F62;&#x586B;&#x5145;</p>
<ul>
<li>&#x5982;&#x56FE;8&#xFF08;a&#xFF09;&#x6240;&#x793A;&#xFF1A;&#x586B;&#x5145;&#x7684;&#x5927;&#x5C0F;&#x4E3A;1&#xFF0C;&#x586B;&#x5145;&#x503C;&#x4E3A;0&#x3002;&#x586B;&#x5145;&#x4E4B;&#x540E;&#xFF0C;&#x8F93;&#x5165;&#x56FE;&#x7247;&#x5C3A;&#x5BF8;&#x4ECE;4&#xD7;4&#x53D8;&#x6210;&#x4E86;6&#xD7;6&#xFF0C;&#x4F7F;&#x7528;3&#xD7;3&#x7684;&#x5377;&#x79EF;&#x6838;&#xFF0C;&#x8F93;&#x51FA;&#x56FE;&#x7247;&#x5C3A;&#x5BF8;&#x4E3A;4&#xD7;4&#x3002;</li>
<li>&#x5982;&#x56FE;8&#xFF08;b&#xFF09;&#x6240;&#x793A;&#xFF1A;&#x586B;&#x5145;&#x7684;&#x5927;&#x5C0F;&#x4E3A;2&#xFF0C;&#x586B;&#x5145;&#x503C;&#x4E3A;0&#x3002;&#x586B;&#x5145;&#x4E4B;&#x540E;&#xFF0C;&#x8F93;&#x5165;&#x56FE;&#x7247;&#x5C3A;&#x5BF8;&#x4ECE;4&#xD7;4&#x53D8;&#x6210;&#x4E86;8&#xD7;8&#xFF0C;&#x4F7F;&#x7528;3&#xD7;3&#x7684;&#x5377;&#x79EF;&#x6838;&#xFF0C;&#x8F93;&#x51FA;&#x56FE;&#x7247;&#x5C3A;&#x5BF8;&#x4E3A;6&#xD7;6&#x3002;</li>
</ul>
<p>&#x5982;&#x679C;&#x5728;&#x56FE;&#x7247;&#x9AD8;&#x5EA6;&#x65B9;&#x5411;&#xFF0C;&#x5728;&#x7B2C;&#x4E00;&#x884C;&#x4E4B;&#x524D;&#x586B;&#x5145;$p<em>{h1}$&#x884C;&#xFF0C;&#x5728;&#x6700;&#x540E;&#x4E00;&#x884C;&#x4E4B;&#x540E;&#x586B;&#x5145;$p</em>{h2}$&#x884C;&#xFF1B;&#x5728;&#x56FE;&#x7247;&#x7684;&#x5BBD;&#x5EA6;&#x65B9;&#x5411;&#xFF0C;&#x5728;&#x7B2C;1&#x5217;&#x4E4B;&#x524D;&#x586B;&#x5145;$p<em>{w1}$&#x5217;&#xFF0C;&#x5728;&#x6700;&#x540E;1&#x5217;&#x4E4B;&#x540E;&#x586B;&#x5145;$p</em>{w2}$&#x5217;&#xFF1B;&#x5219;&#x586B;&#x5145;&#x4E4B;&#x540E;&#x7684;&#x56FE;&#x7247;&#x5C3A;&#x5BF8;&#x4E3A;$(H+p<em>{h1}+p</em>{h2})&#xD7;(W+p<em>{w1}+p</em>{w2})$&#x3002;&#x7ECF;&#x8FC7;&#x5927;&#x5C0F;&#x4E3A;$k_h&#xD7;k_w$&#x7684;&#x5377;&#x79EF;&#x6838;&#x64CD;&#x4F5C;&#x4E4B;&#x540E;&#xFF0C;&#x8F93;&#x51FA;&#x56FE;&#x7247;&#x7684;&#x5C3A;&#x5BF8;&#x4E3A;&#xFF1A;</p>
<p>$$
H<em>{out}=H+p</em>{h1}+p<em>{h2}&#x2212;k_h+1 \
W</em>{out}=W+p<em>{w1}+p</em>{w2}&#x2212;k_w+1</p>
<p>$$</p>
<p>&#x5728;&#x5377;&#x79EF;&#x8BA1;&#x7B97;&#x8FC7;&#x7A0B;&#x4E2D;&#xFF0C;&#x901A;&#x5E38;&#x4F1A;&#x5728;&#x9AD8;&#x5EA6;&#x6216;&#x8005;&#x5BBD;&#x5EA6;&#x7684;&#x4E24;&#x4FA7;&#x91C7;&#x53D6;&#x7B49;&#x91CF;&#x586B;&#x5145;&#xFF0C;&#x5373;$ph1=ph2=ph, pw1=pw2=pw$&#x4E0A;&#x9762;&#x8BA1;&#x7B97;&#x516C;&#x5F0F;&#x4E5F;&#x5C31;&#x53D8;&#x4E3A;&#xFF1A;</p>
<p>$$
H<em>{out}=H+2p</em>{h}&#x2212;k<em>h+1 \
W</em>{out}=W+2p_{w}&#x2212;k_w+1</p>
<p>$$</p>
<p>&#x5377;&#x79EF;&#x6838;&#x5927;&#x5C0F;&#x901A;&#x5E38;&#x4F7F;&#x7528;1&#xFF0C;3&#xFF0C;5&#xFF0C;7&#x8FD9;&#x6837;&#x7684;&#x5947;&#x6570;&#xFF0C;&#x5982;&#x679C;&#x4F7F;&#x7528;&#x7684;&#x586B;&#x5145;&#x5927;&#x5C0F;&#x4E3A;$p_h=(k_h&#x2212;1)/2&#xFF0C;pw=(k_w&#x2212;1)/2$&#x5219;&#x5377;&#x79EF;&#x4E4B;&#x540E;&#x56FE;&#x50CF;&#x5C3A;&#x5BF8;&#x4E0D;&#x53D8;&#x3002;&#x4F8B;&#x5982;&#x5F53;&#x5377;&#x79EF;&#x6838;&#x5927;&#x5C0F;&#x4E3A;3&#x65F6;&#xFF0C;padding&#x5927;&#x5C0F;&#x4E3A;1&#xFF0C;&#x5377;&#x79EF;&#x4E4B;&#x540E;&#x56FE;&#x50CF;&#x5C3A;&#x5BF8;&#x4E0D;&#x53D8;&#xFF1B;&#x540C;&#x7406;&#xFF0C;&#x5982;&#x679C;&#x5377;&#x79EF;&#x6838;&#x5927;&#x5C0F;&#x4E3A;5&#xFF0C;padding&#x5927;&#x5C0F;&#x4E3A;2&#xFF0C;&#x4E5F;&#x80FD;&#x4FDD;&#x6301;&#x56FE;&#x50CF;&#x5C3A;&#x5BF8;&#x4E0D;&#x53D8;&#x3002;</p>
<h3 id="&#x6B65;&#x5E45;&#xFF08;stride&#xFF09;">&#x6B65;&#x5E45;&#xFF08;stride&#xFF09;</h3>
<p><strong>&#x56FE;8</strong> &#x4E2D;&#x5377;&#x79EF;&#x6838;&#x6BCF;&#x6B21;&#x6ED1;&#x52A8;&#x4E00;&#x4E2A;&#x50CF;&#x7D20;&#x70B9;&#xFF0C;&#x8FD9;&#x662F;&#x6B65;&#x5E45;&#x4E3A;1&#x7684;&#x7279;&#x6B8A;&#x60C5;&#x51B5;&#x3002;<strong>&#x56FE;9</strong> &#x662F;&#x6B65;&#x5E45;&#x4E3A;2&#x7684;&#x5377;&#x79EF;&#x8FC7;&#x7A0B;&#xFF0C;&#x5377;&#x79EF;&#x6838;&#x5728;&#x56FE;&#x7247;&#x4E0A;&#x79FB;&#x52A8;&#x65F6;&#xFF0C;&#x6BCF;&#x6B21;&#x79FB;&#x52A8;&#x5927;&#x5C0F;&#x4E3A;2&#x4E2A;&#x50CF;&#x7D20;&#x70B9;&#x3002;</p>
<p><img src="https://ai-studio-static-online.cdn.bcebos.com/afdae9af02fc45eabdd9663ee6474e4da86675fa1f444c78aea0e21539b32cf0" alt="img"></p>
<p>&#x56FE;9&#xFF1A;&#x6B65;&#x5E45;&#x4E3A;2&#x7684;&#x5377;&#x79EF;&#x8FC7;&#x7A0B;</p>
<p>&#x5F53;&#x5BBD;&#x548C;&#x9AD8;&#x65B9;&#x5411;&#x7684;&#x6B65;&#x5E45;&#x5206;&#x522B;&#x4E3A;$s_h$&#x548C;$s_w$&#x65F6;&#xFF0C;&#x8F93;&#x51FA;&#x7279;&#x5F81;&#x56FE;&#x5C3A;&#x5BF8;&#x7684;&#x8BA1;&#x7B97;&#x516C;&#x5F0F;&#x662F;&#xFF1A;</p>
<p>$$
H<em>{out} = \frac{H + 2p_h - k_h}{s_h}  +1\
W</em>{out} = \frac{W + 2p_w - k_w}{s_w} + 1</p>
<p>$$</p>
<p>&#x5047;&#x8BBE;&#x8F93;&#x5165;&#x56FE;&#x7247;&#x5C3A;&#x5BF8;&#x662F;H&#xD7;W=100&#xD7;100&#xFF0C;&#x5377;&#x79EF;&#x6838;&#x5927;&#x5C0F;$k_h&#xD7;k_w=3&#xD7;3$&#xFF0C;&#x586B;&#x5145;$p_h=p_w=1$&#xFF0C;&#x6B65;&#x5E45;&#x4E3A;$s_h=s_w=2$&#xFF0C;&#x5219;&#x8F93;&#x51FA;&#x7279;&#x5F81;&#x56FE;&#x7684;&#x5C3A;&#x5BF8;&#x4E3A;&#xFF1A;</p>
<p>$$
H<em>{out} = \frac{100 + 2 - 3}{2} + 1 = 50 \
W</em>{out} = \frac{100 + 2 - 3}{2} + 1 = 50</p>
<p>$$</p>
<h3 id="&#x611F;&#x53D7;&#x91CE;&#xFF08;receptive-field&#xFF09;">&#x611F;&#x53D7;&#x91CE;&#xFF08;Receptive Field&#xFF09;</h3>
<p>&#x8F93;&#x51FA;&#x7279;&#x5F81;&#x56FE;&#x4E0A;&#x6BCF;&#x4E2A;&#x70B9;&#x7684;&#x6570;&#x503C;&#xFF0C;&#x662F;&#x7531;&#x8F93;&#x5165;&#x56FE;&#x7247;&#x4E0A;&#x5927;&#x5C0F;&#x4E3A;$k_h\times k_w$&#x7684;&#x533A;&#x57DF;&#x7684;&#x5143;&#x7D20;&#x4E0E;&#x5377;&#x79EF;&#x6838;&#x6BCF;&#x4E2A;&#x5143;&#x7D20;&#x76F8;&#x4E58;&#x518D;&#x76F8;&#x52A0;&#x5F97;&#x5230;&#x7684;&#xFF0C;&#x6240;&#x4EE5;&#x8F93;&#x5165;&#x56FE;&#x50CF;&#x4E0A;$k_h\times k_w$&#x533A;&#x57DF;&#x5185;&#x6BCF;&#x4E2A;&#x5143;&#x7D20;&#x6570;&#x503C;&#x7684;&#x6539;&#x53D8;&#xFF0C;&#x90FD;&#x4F1A;&#x5F71;&#x54CD;&#x8F93;&#x51FA;&#x70B9;&#x7684;&#x50CF;&#x7D20;&#x503C;&#x3002;&#x6211;&#x4EEC;&#x5C06;&#x8FD9;&#x4E2A;&#x533A;&#x57DF;&#x53EB;&#x505A;&#x8F93;&#x51FA;&#x7279;&#x5F81;&#x56FE;&#x4E0A;&#x5BF9;&#x5E94;&#x70B9;&#x7684;&#x611F;&#x53D7;&#x91CE;&#x3002;&#x611F;&#x53D7;&#x91CE;&#x5185;&#x6BCF;&#x4E2A;&#x5143;&#x7D20;&#x6570;&#x503C;&#x7684;&#x53D8;&#x52A8;&#xFF0C;&#x90FD;&#x4F1A;&#x5F71;&#x54CD;&#x8F93;&#x51FA;&#x70B9;&#x7684;&#x6570;&#x503C;&#x53D8;&#x5316;&#x3002;&#x6BD4;&#x5982;3&#xD7;3&#x5377;&#x79EF;&#x5BF9;&#x5E94;&#x7684;&#x611F;&#x53D7;&#x91CE;&#x5927;&#x5C0F;&#x5C31;&#x662F;3&#xD7;3&#xFF0C;&#x5982; <strong>&#x56FE;10</strong> &#x6240;&#x793A;&#x3002;</p>
<p><img src="https://ai-studio-static-online.cdn.bcebos.com/1021536721524f4d8f4c1aefa89693c4b0fd388f21a347b583d413b3ac41241b" alt="img"></p>
<p>&#x56FE;10&#xFF1A;&#x611F;&#x53D7;&#x91CE;&#x4E3A;3&#xD7;3&#x7684;&#x5377;&#x79EF;</p>
<p>&#x800C;&#x5F53;&#x901A;&#x8FC7;&#x4E24;&#x5C42;3&#xD7;3&#x7684;&#x5377;&#x79EF;&#x4E4B;&#x540E;&#xFF0C;&#x611F;&#x53D7;&#x91CE;&#x7684;&#x5927;&#x5C0F;&#x5C06;&#x4F1A;&#x589E;&#x52A0;&#x5230;5&#xD7;5&#xFF0C;&#x5982; <strong>&#x56FE;11</strong> &#x6240;&#x793A;&#x3002;</p>
<p><img src="https://ai-studio-static-online.cdn.bcebos.com/ac14916db81e40a48a25ab894d7a95e33fa0eece71d44a55af7bffab462fb7a7" alt="img"></p>
<p>&#x56FE;11&#xFF1A;&#x611F;&#x53D7;&#x91CE;&#x4E3A;5&#xD7;5&#x7684;&#x5377;&#x79EF;</p>
<p>&#x56E0;&#x6B64;&#xFF0C;&#x5F53;&#x589E;&#x52A0;&#x5377;&#x79EF;&#x7F51;&#x7EDC;&#x6DF1;&#x5EA6;&#x7684;&#x540C;&#x65F6;&#xFF0C;&#x611F;&#x53D7;&#x91CE;&#x5C06;&#x4F1A;&#x589E;&#x5927;&#xFF0C;&#x8F93;&#x51FA;&#x7279;&#x5F81;&#x56FE;&#x4E2D;&#x7684;&#x4E00;&#x4E2A;&#x50CF;&#x7D20;&#x70B9;&#x5C06;&#x4F1A;&#x5305;&#x542B;&#x66F4;&#x591A;&#x7684;&#x56FE;&#x50CF;&#x8BED;&#x4E49;&#x4FE1;&#x606F;&#x3002;</p>
<h3 id="&#x591A;&#x8F93;&#x5165;&#x901A;&#x9053;&#x3001;&#x591A;&#x8F93;&#x51FA;&#x901A;&#x9053;&#x548C;&#x6279;&#x91CF;&#x64CD;&#x4F5C;">&#x591A;&#x8F93;&#x5165;&#x901A;&#x9053;&#x3001;&#x591A;&#x8F93;&#x51FA;&#x901A;&#x9053;&#x548C;&#x6279;&#x91CF;&#x64CD;&#x4F5C;</h3>
<p>&#x524D;&#x9762;&#x4ECB;&#x7ECD;&#x7684;&#x5377;&#x79EF;&#x8BA1;&#x7B97;&#x8FC7;&#x7A0B;&#x6BD4;&#x8F83;&#x7B80;&#x5355;&#xFF0C;&#x5B9E;&#x9645;&#x5E94;&#x7528;&#x65F6;&#xFF0C;&#x5904;&#x7406;&#x7684;&#x95EE;&#x9898;&#x8981;&#x590D;&#x6742;&#x7684;&#x591A;&#x3002;&#x4F8B;&#x5982;&#xFF1A;&#x5BF9;&#x4E8E;&#x5F69;&#x8272;&#x56FE;&#x7247;&#x6709;RGB&#x4E09;&#x4E2A;&#x901A;&#x9053;&#xFF0C;&#x9700;&#x8981;&#x5904;&#x7406;&#x591A;&#x8F93;&#x5165;&#x901A;&#x9053;&#x7684;&#x573A;&#x666F;&#x3002;&#x8F93;&#x51FA;&#x7279;&#x5F81;&#x56FE;&#x5F80;&#x5F80;&#x4E5F;&#x4F1A;&#x5177;&#x6709;&#x591A;&#x4E2A;&#x901A;&#x9053;&#xFF0C;&#x800C;&#x4E14;&#x5728;&#x795E;&#x7ECF;&#x7F51;&#x7EDC;&#x7684;&#x8BA1;&#x7B97;&#x4E2D;&#x5E38;&#x5E38;&#x662F;&#x628A;&#x4E00;&#x4E2A;&#x6279;&#x6B21;&#x7684;&#x6837;&#x672C;&#x653E;&#x5728;&#x4E00;&#x8D77;&#x8BA1;&#x7B97;&#xFF0C;&#x6240;&#x4EE5;&#x5377;&#x79EF;&#x7B97;&#x5B50;&#x9700;&#x8981;&#x5177;&#x6709;&#x6279;&#x91CF;&#x5904;&#x7406;&#x591A;&#x8F93;&#x5165;&#x548C;&#x591A;&#x8F93;&#x51FA;&#x901A;&#x9053;&#x6570;&#x636E;&#x7684;&#x529F;&#x80FD;&#xFF0C;&#x4E0B;&#x9762;&#x5C06;&#x5206;&#x522B;&#x4ECB;&#x7ECD;&#x8FD9;&#x51E0;&#x79CD;&#x573A;&#x666F;&#x7684;&#x64CD;&#x4F5C;&#x65B9;&#x5F0F;&#x3002;</p>
<ul>
<li><strong>&#x591A;&#x8F93;&#x5165;&#x901A;&#x9053;&#x573A;&#x666F;</strong></li>
</ul>
<p>&#x4E0A;&#x9762;&#x7684;&#x4F8B;&#x5B50;&#x4E2D;&#xFF0C;&#x5377;&#x79EF;&#x5C42;&#x7684;&#x6570;&#x636E;&#x662F;&#x4E00;&#x4E2A;2&#x7EF4;&#x6570;&#x7EC4;&#xFF0C;&#x4F46;&#x5B9E;&#x9645;&#x4E0A;&#x4E00;&#x5F20;&#x56FE;&#x7247;&#x5F80;&#x5F80;&#x542B;&#x6709;RGB&#x4E09;&#x4E2A;&#x901A;&#x9053;&#xFF0C;&#x8981;&#x8BA1;&#x7B97;&#x5377;&#x79EF;&#x7684;&#x8F93;&#x51FA;&#x7ED3;&#x679C;&#xFF0C;&#x5377;&#x79EF;&#x6838;&#x7684;&#x5F62;&#x5F0F;&#x4E5F;&#x4F1A;&#x53D1;&#x751F;&#x53D8;&#x5316;&#x3002;&#x5047;&#x8BBE;&#x8F93;&#x5165;&#x56FE;&#x7247;&#x7684;&#x901A;&#x9053;&#x6570;&#x4E3A;$C<em>{in}$&#xFF0C;&#x8F93;&#x5165;&#x6570;&#x636E;&#x7684;&#x5F62;&#x72B6;&#x662F;$C</em>{in}\times H<em>{in}\times W</em>{in}$&#xFF0C;&#x8BA1;&#x7B97;&#x8FC7;&#x7A0B;&#x5982; <strong>&#x56FE;12</strong> &#x6240;&#x793A;&#x3002;</p>
<ol>
<li><p>&#x5BF9;&#x6BCF;&#x4E2A;&#x901A;&#x9053;&#x5206;&#x522B;&#x8BBE;&#x8BA1;&#x4E00;&#x4E2A;2&#x7EF4;&#x6570;&#x7EC4;&#x4F5C;&#x4E3A;&#x5377;&#x79EF;&#x6838;&#xFF0C;&#x5377;&#x79EF;&#x6838;&#x6570;&#x7EC4;&#x7684;&#x5F62;&#x72B6;&#x662F;$C_{in}\times k_h\times k_w$&#x3002;</p>
</li>
<li><p>&#x5BF9;&#x4EFB;&#x4E00;&#x901A;&#x9053;$C<em>{in} \in [0,C</em>{in})$&#xFF0C;&#x5206;&#x522B;&#x7528;&#x5927;&#x5C0F;&#x4E3A;$k<em>h\times k_w$ &#x7684;&#x5377;&#x79EF;&#x6838;&#x5728;&#x5927;&#x5C0F;&#x4E3A;$H</em>{in}\times W_{in}$&#x7684;&#x4E8C;&#x7EF4;&#x6570;&#x7EC4;&#x4E0A;&#x505A;&#x5377;&#x79EF;&#x3002;</p>
</li>
<li><p>&#x5C06;&#x8FD9;$C<em>{in}${out}&#x4E2A;&#x901A;&#x9053;&#x7684;&#x8BA1;&#x7B97;&#x7ED3;&#x679C;&#x76F8;&#x52A0;,&#x5F97;&#x5230;&#x7684;&#x662F;&#x4E00;&#x4E2A;&#x5F62;&#x72B6;&#x4E3A;$H</em>{out}\times W_{out}$&#x7684;&#x4E8C;&#x7EF4;&#x6570;&#x7EC4;&#x3002;</p>
</li>
</ol>
<p><img src="https://ai-studio-static-online.cdn.bcebos.com/92186667b8424a7ca781b22de6766fa62e31512cf2e24e33a4b796541177c9dd" alt="img"></p>
<p>&#x56FE;12&#xFF1A;&#x591A;&#x8F93;&#x5165;&#x901A;&#x9053;&#x8BA1;&#x7B97;&#x8FC7;&#x7A0B;</p>
<ul>
<li><strong>&#x591A;&#x8F93;&#x51FA;&#x901A;&#x9053;&#x573A;&#x666F;</strong></li>
</ul>
<p>&#x4E00;&#x822C;&#x6765;&#x8BF4;&#xFF0C;&#x5377;&#x79EF;&#x64CD;&#x4F5C;&#x7684;&#x8F93;&#x51FA;&#x7279;&#x5F81;&#x56FE;&#x4E5F;&#x4F1A;&#x5177;&#x6709;&#x591A;&#x4E2A;&#x901A;&#x9053;$C<em>{out}$&#xFF0C;&#x8FD9;&#x65F6;&#x6211;&#x4EEC;&#x9700;&#x8981;&#x8BBE;&#x8BA1;$C</em>{out}$&#x4E2A;&#x7EF4;&#x5EA6;&#x4E3A;$C<em>{in}\times k_h \times k_w$&#x7684;&#x5377;&#x79EF;&#x6838;&#xFF0C;&#x5377;&#x79EF;&#x6838;&#x6570;&#x7EC4;&#x7684;&#x7EF4;&#x5EA6;&#x662F;$C</em>{out}\times C_{in}\times k_h \times k_w$&#xFF0C;&#x5982; <strong>&#x56FE;13</strong> &#x6240;&#x793A;&#x3002;</p>
<ol>
<li>&#x5BF9;&#x4EFB;&#x4E00;&#x8F93;&#x51FA;&#x901A;&#x9053;$c<em>{out} \in [0,C</em>{out}]$&#xFF0C;&#x5206;&#x522B;&#x4F7F;&#x7528;&#x4E0A;&#x9762;&#x63CF;&#x8FF0;&#x7684;&#x5F62;&#x72B6;&#x4E3A;$C_{in}\times k_h \times k_w$&#x7684;&#x5377;&#x79EF;&#x6838;&#x5BF9;&#x8F93;&#x5165;&#x56FE;&#x7247;&#x505A;&#x5377;&#x79EF;&#x3002;</li>
<li>&#x5C06;&#x8FD9;$C<em>{out}$&#x4E2A;&#x5F62;&#x72B6;&#x4E3A;$H</em>{out}\times W<em>{out}$&#x7684;&#x4E8C;&#x7EF4;&#x6570;&#x7EC4;&#x62FC;&#x63A5;&#x5728;&#x4E00;&#x8D77;&#xFF0C;&#x5F62;&#x6210;&#x7EF4;&#x5EA6;&#x4E3A;&#x7684;$C</em>{out}\times H<em>{out}\times W</em>{out}$&#x4E09;&#x7EF4;&#x6570;&#x7EC4;&#x3002;</li>
</ol>
<hr>
<p><strong>&#x8BF4;&#x660E;&#xFF1A;</strong></p>
<p>&#x901A;&#x5E38;&#x5C06;&#x5377;&#x79EF;&#x6838;&#x7684;&#x8F93;&#x51FA;&#x901A;&#x9053;&#x6570;&#x53EB;&#x505A;&#x5377;&#x79EF;&#x6838;&#x7684;&#x4E2A;&#x6570;&#x3002;</p>
<hr>
<p><img src="https://ai-studio-static-online.cdn.bcebos.com/cf1fbddc141349e4b7aaeade9a201b78a16d249e069c4f8aaeb77e0ea1a95c31" alt="img"></p>
<p>&#x56FE;13&#xFF1A;&#x591A;&#x8F93;&#x51FA;&#x901A;&#x9053;&#x8BA1;&#x7B97;&#x8FC7;&#x7A0B;</p>
<ul>
<li><strong>&#x6279;&#x91CF;&#x64CD;&#x4F5C;</strong></li>
</ul>
<p>&#x5728;&#x5377;&#x79EF;&#x795E;&#x7ECF;&#x7F51;&#x7EDC;&#x7684;&#x8BA1;&#x7B97;&#x4E2D;&#xFF0C;&#x901A;&#x5E38;&#x5C06;&#x591A;&#x4E2A;&#x6837;&#x672C;&#x653E;&#x5728;&#x4E00;&#x8D77;&#x5F62;&#x6210;&#x4E00;&#x4E2A;mini-batch&#x8FDB;&#x884C;&#x6279;&#x91CF;&#x64CD;&#x4F5C;&#xFF0C;&#x5373;&#x8F93;&#x5165;&#x6570;&#x636E;&#x7684;&#x7EF4;&#x5EA6;&#x662F;$N\times C<em>{in}\times H</em>{in}\times W<em>{in}$&#x3002;&#x7531;&#x4E8E;&#x4F1A;&#x5BF9;&#x6BCF;&#x5F20;&#x56FE;&#x7247;&#x4F7F;&#x7528;&#x540C;&#x6837;&#x7684;&#x5377;&#x79EF;&#x6838;&#x8FDB;&#x884C;&#x5377;&#x79EF;&#x64CD;&#x4F5C;&#xFF0C;&#x5377;&#x79EF;&#x6838;&#x7684;&#x7EF4;&#x5EA6;&#x4E0E;&#x4E0A;&#x9762;&#x591A;&#x8F93;&#x51FA;&#x901A;&#x9053;&#x7684;&#x60C5;&#x51B5;&#x4E00;&#x6837;&#xFF0C;&#x4ECD;&#x7136;&#x662F;$C</em>{out} \times C<em>{in}\times k_h\times k_w$&#xFF0C;&#x8F93;&#x51FA;&#x7279;&#x5F81;&#x56FE;&#x7684;&#x7EF4;&#x5EA6;&#x662F;$N\times C</em>{out}\times H<em>{out}\times W</em>{out}$&#x5982; <strong>&#x56FE;14</strong> &#x6240;&#x793A;&#x3002;</p>
<p><img src="https://ai-studio-static-online.cdn.bcebos.com/60760d68001c40d6a6c500b17f57d8deae7b5921631b4b6b896b057b904d24b1" alt="img"></p>
<p>&#x56FE;14&#xFF1A;&#x6279;&#x91CF;&#x64CD;&#x4F5C;</p>
<h3 id="&#x98DE;&#x6868;&#x5377;&#x79EF;api&#x4ECB;&#x7ECD;">&#x98DE;&#x6868;&#x5377;&#x79EF;API&#x4ECB;&#x7ECD;</h3>
<p>&#x98DE;&#x6868;&#x5377;&#x79EF;&#x7B97;&#x5B50;&#x5BF9;&#x5E94;&#x7684;API&#x662F;<a href="https://www.paddlepaddle.org.cn/documentation/docs/zh/api/paddle/nn/Conv2D_cn.html" target="_blank">paddle.nn.Conv2D</a>&#xFF0C;&#x7528;&#x6237;&#x53EF;&#x4EE5;&#x76F4;&#x63A5;&#x8C03;&#x7528;API&#x8FDB;&#x884C;&#x8BA1;&#x7B97;&#xFF0C;&#x4E5F;&#x53EF;&#x4EE5;&#x5728;&#x6B64;&#x57FA;&#x7840;&#x4E0A;&#x4FEE;&#x6539;&#x3002;Conv2D&#x540D;&#x79F0;&#x4E2D;&#x7684;&#x201C;2D&#x201D;&#x8868;&#x660E;&#x5377;&#x79EF;&#x6838;&#x662F;&#x4E8C;&#x7EF4;&#x7684;&#xFF0C;&#x591A;&#x7528;&#x4E8E;&#x5904;&#x7406;&#x56FE;&#x50CF;&#x6570;&#x636E;&#x3002;&#x7C7B;&#x4F3C;&#x7684;&#xFF0C;&#x4E5F;&#x6709;Conv3D&#x53EF;&#x4EE5;&#x7528;&#x4E8E;&#x5904;&#x7406;&#x89C6;&#x9891;&#x6570;&#x636E;&#xFF08;&#x56FE;&#x50CF;&#x7684;&#x5E8F;&#x5217;&#xFF09;&#x3002;</p>
<blockquote>
<p><em>class</em> paddle.nn.Conv2D (<em>in_channels, out_channels, kernel_size, stride=1, padding=0, dilation=1, groups=1, padding_mode=&#x2018;zeros&#x2019;, weight_attr=None, bias_attr=None, data_format=&#x2018;NCHW&#x2019;</em>)</p>
</blockquote>
<p>&#x5E38;&#x7528;&#x7684;&#x53C2;&#x6570;&#x5982;&#x4E0B;&#xFF1A;</p>
<ul>
<li>in_channels(int) - &#x8F93;&#x5165;&#x56FE;&#x50CF;&#x7684;&#x901A;&#x9053;&#x6570;&#x3002;</li>
<li>out<em>channels(int) - &#x5377;&#x79EF;&#x6838;&#x7684;&#x4E2A;&#x6570;&#xFF0C;&#x548C;&#x8F93;&#x51FA;&#x7279;&#x5F81;&#x56FE;&#x901A;&#x9053;&#x6570;&#x76F8;&#x540C;&#xFF0C;&#x76F8;&#x5F53;&#x4E8E;&#x4E0A;&#x6587;&#x4E2D;&#x7684;$C</em>{out}$&#x3002;</li>
<li>kernel_size(int|list|tuple) - &#x5377;&#x79EF;&#x6838;&#x5927;&#x5C0F;&#xFF0C;&#x53EF;&#x4EE5;&#x662F;&#x6574;&#x6570;&#xFF0C;&#x6BD4;&#x5982;3&#xFF0C;&#x8868;&#x793A;&#x5377;&#x79EF;&#x6838;&#x7684;&#x9AD8;&#x548C;&#x5BBD;&#x5747;&#x4E3A;3 &#xFF1B;&#x6216;&#x8005;&#x662F;&#x4E24;&#x4E2A;&#x6574;&#x6570;&#x7684;list&#xFF0C;&#x4F8B;&#x5982;[3,2]&#xFF0C;&#x8868;&#x793A;&#x5377;&#x79EF;&#x6838;&#x7684;&#x9AD8;&#x4E3A;3&#xFF0C;&#x5BBD;&#x4E3A;2&#x3002;</li>
<li>stride(int|list|tuple&#xFF0C;&#x53EF;&#x9009;) - &#x6B65;&#x957F;&#x5927;&#x5C0F;&#xFF0C;&#x53EF;&#x4EE5;&#x662F;&#x6574;&#x6570;&#xFF0C;&#x9ED8;&#x8BA4;&#x503C;&#x4E3A;1&#xFF0C;&#x8868;&#x793A;&#x5782;&#x76F4;&#x548C;&#x6C34;&#x5E73;&#x6ED1;&#x52A8;&#x6B65;&#x5E45;&#x5747;&#x4E3A;1&#xFF1B;&#x6216;&#x8005;&#x662F;&#x4E24;&#x4E2A;&#x6574;&#x6570;&#x7684;list&#xFF0C;&#x4F8B;&#x5982;[3,2]&#xFF0C;&#x8868;&#x793A;&#x5782;&#x76F4;&#x6ED1;&#x52A8;&#x6B65;&#x5E45;&#x4E3A;3&#xFF0C;&#x6C34;&#x5E73;&#x6ED1;&#x52A8;&#x6B65;&#x5E45;&#x4E3A;2&#x3002;</li>
<li>padding(int|list|tuple|str&#xFF0C;&#x53EF;&#x9009;) - &#x586B;&#x5145;&#x5927;&#x5C0F;&#xFF0C;&#x53EF;&#x4EE5;&#x662F;&#x6574;&#x6570;&#xFF0C;&#x6BD4;&#x5982;1&#xFF0C;&#x8868;&#x793A;&#x7AD6;&#x76F4;&#x548C;&#x6C34;&#x5E73;&#x8FB9;&#x754C;&#x586B;&#x5145;&#x5927;&#x5C0F;&#x5747;&#x4E3A;1&#xFF1B;&#x6216;&#x8005;&#x662F;&#x4E24;&#x4E2A;&#x6574;&#x6570;&#x7684;list&#xFF0C;&#x4F8B;&#x5982;[2,1]&#xFF0C;&#x8868;&#x793A;&#x7AD6;&#x76F4;&#x8FB9;&#x754C;&#x586B;&#x5145;&#x5927;&#x5C0F;&#x4E3A;2&#xFF0C;&#x6C34;&#x5E73;&#x8FB9;&#x754C;&#x586B;&#x5145;&#x5927;&#x5C0F;&#x4E3A;1&#x3002;</li>
</ul>
<p>&#x8F93;&#x5165;&#x6570;&#x636E;&#x7EF4;&#x5EA6;$[N,C<em>{in},H</em>{in},W<em>{in}]$&#xFF0C;&#x8F93;&#x51FA;&#x6570;&#x636E;&#x7EF4;&#x5EA6;$[N,out_channels,H</em>{out},W<em>{out}]$&#xFF0C;&#x6743;&#x91CD;&#x53C2;&#x6570;$w$&#x7684;&#x7EF4;&#x5EA6;&#xFF0C;$[out_channels,C</em>{in},filter_size_h,filter_size_w]$&#x504F;&#x7F6E;&#x53C2;&#x6570;$b$&#x7684;&#x7EF4;&#x5EA6;&#x662F;$[out_channels]$&#x3002;&#x6CE8;&#x610F;&#xFF0C;&#x5373;&#x4F7F;&#x8F93;&#x5165;&#x53EA;&#x6709;&#x4E00;&#x5F20;&#x7070;&#x5EA6;&#x56FE;&#x7247;$[H<em>{in},W</em>{in}]$&#xFF0C;&#x4E5F;&#x9700;&#x8981;&#x5904;&#x7406;&#x6210;&#x56DB;&#x4E2A;&#x7EF4;&#x5EA6;&#x7684;&#x8F93;&#x5165;&#x5411;&#x91CF;$[1,1,H<em>{in},W</em>{in}]$&#x3002;</p>
<h3 id="&#x5377;&#x79EF;&#x7B97;&#x5B50;&#x5E94;&#x7528;&#x4E3E;&#x4F8B;">&#x5377;&#x79EF;&#x7B97;&#x5B50;&#x5E94;&#x7528;&#x4E3E;&#x4F8B;</h3>
<p>&#x4E0B;&#x9762;&#x4ECB;&#x7ECD;&#x5377;&#x79EF;&#x7B97;&#x5B50;&#x5728;&#x56FE;&#x7247;&#x4E2D;&#x5E94;&#x7528;&#x7684;&#x4E09;&#x4E2A;&#x6848;&#x4F8B;&#xFF0C;&#x5E76;&#x89C2;&#x5BDF;&#x5176;&#x8BA1;&#x7B97;&#x7ED3;&#x679C;&#x3002;</p>
<p><strong>&#x6848;&#x4F8B;1&#x2014;&#x2014;&#x7B80;&#x5355;&#x7684;&#x9ED1;&#x767D;&#x8FB9;&#x754C;&#x68C0;&#x6D4B;</strong></p>
<p>&#x4E0B;&#x9762;&#x662F;&#x4F7F;&#x7528;Conv2D&#x7B97;&#x5B50;&#x5B8C;&#x6210;&#x4E00;&#x4E2A;&#x56FE;&#x50CF;&#x8FB9;&#x754C;&#x68C0;&#x6D4B;&#x7684;&#x4EFB;&#x52A1;&#x3002;&#x56FE;&#x50CF;&#x5DE6;&#x8FB9;&#x4E3A;&#x5149;&#x4EAE;&#x90E8;&#x5206;&#xFF0C;&#x53F3;&#x8FB9;&#x4E3A;&#x9ED1;&#x6697;&#x90E8;&#x5206;&#xFF0C;&#x9700;&#x8981;&#x68C0;&#x6D4B;&#x51FA;&#x5149;&#x4EAE;&#x8DDF;&#x9ED1;&#x6697;&#x7684;&#x5206;&#x754C;&#x5904;&#x3002;</p>
<p>&#x8BBE;&#x7F6E;&#x5BBD;&#x5EA6;&#x65B9;&#x5411;&#x7684;&#x5377;&#x79EF;&#x6838;&#x4E3A;[1,0,&#x2212;1][1, 0, -1][1,0,&#x2212;1]&#xFF0C;&#x6B64;&#x5377;&#x79EF;&#x6838;&#x4F1A;&#x5C06;&#x5BBD;&#x5EA6;&#x65B9;&#x5411;&#x95F4;&#x9694;&#x4E3A;1&#x7684;&#x4E24;&#x4E2A;&#x50CF;&#x7D20;&#x70B9;&#x7684;&#x6570;&#x503C;&#x76F8;&#x51CF;&#x3002;&#x5F53;&#x5377;&#x79EF;&#x6838;&#x5728;&#x56FE;&#x7247;&#x4E0A;&#x6ED1;&#x52A8;&#x65F6;&#xFF0C;&#x5982;&#x679C;&#x5B83;&#x6240;&#x8986;&#x76D6;&#x7684;&#x50CF;&#x7D20;&#x70B9;&#x4F4D;&#x4E8E;&#x4EAE;&#x5EA6;&#x76F8;&#x540C;&#x7684;&#x533A;&#x57DF;&#xFF0C;&#x5219;&#x5DE6;&#x53F3;&#x95F4;&#x9694;&#x4E3A;1&#x7684;&#x4E24;&#x4E2A;&#x50CF;&#x7D20;&#x70B9;&#x6570;&#x503C;&#x7684;&#x5DEE;&#x4E3A;0&#x3002;&#x53EA;&#x6709;&#x5F53;&#x5377;&#x79EF;&#x6838;&#x8986;&#x76D6;&#x7684;&#x50CF;&#x7D20;&#x70B9;&#x6709;&#x7684;&#x5904;&#x4E8E;&#x5149;&#x4EAE;&#x533A;&#x57DF;&#xFF0C;&#x6709;&#x7684;&#x5904;&#x5728;&#x9ED1;&#x6697;&#x533A;&#x57DF;&#x65F6;&#xFF0C;&#x5DE6;&#x53F3;&#x95F4;&#x9694;&#x4E3A;1&#x7684;&#x4E24;&#x4E2A;&#x70B9;&#x50CF;&#x7D20;&#x503C;&#x7684;&#x5DEE;&#x624D;&#x4E0D;&#x4E3A;0&#x3002;&#x5C06;&#x6B64;&#x5377;&#x79EF;&#x6838;&#x4F5C;&#x7528;&#x5230;&#x56FE;&#x7247;&#x4E0A;&#xFF0C;&#x8F93;&#x51FA;&#x7279;&#x5F81;&#x56FE;&#x4E0A;&#x53EA;&#x6709;&#x5BF9;&#x5E94;&#x9ED1;&#x767D;&#x5206;&#x754C;&#x7EBF;&#x7684;&#x5730;&#x65B9;&#x50CF;&#x7D20;&#x503C;&#x624D;&#x4E0D;&#x4E3A;0&#x3002;&#x5177;&#x4F53;&#x4EE3;&#x7801;&#x5982;&#x4E0B;&#x6240;&#x793A;&#xFF0C;&#x7ED3;&#x679C;&#x8F93;&#x51FA;&#x5728;&#x4E0B;&#x65B9;&#x7684;&#x56FE;&#x6848;&#x4E2D;&#x3002;</p>
<pre><code class="lang-python"><span class="hljs-keyword">import</span> matplotlib.pyplot <span class="hljs-keyword">as</span> plt
<span class="hljs-keyword">import</span> numpy <span class="hljs-keyword">as</span> np
<span class="hljs-keyword">import</span> paddle
<span class="hljs-keyword">from</span> paddle.nn <span class="hljs-keyword">import</span> Conv2D
<span class="hljs-keyword">from</span> paddle.nn.initializer <span class="hljs-keyword">import</span> Assign
%matplotlib inline

<span class="hljs-comment"># &#x521B;&#x5EFA;&#x521D;&#x59CB;&#x5316;&#x6743;&#x91CD;&#x53C2;&#x6570;w</span>
w = np.array([<span class="hljs-number">1</span>, <span class="hljs-number">0</span>, <span class="hljs-number">-1</span>], dtype=<span class="hljs-string">&apos;float32&apos;</span>)
<span class="hljs-comment"># &#x5C06;&#x6743;&#x91CD;&#x53C2;&#x6570;&#x8C03;&#x6574;&#x6210;&#x7EF4;&#x5EA6;&#x4E3A;[cout, cin, kh, kw]&#x7684;&#x56DB;&#x7EF4;&#x5F20;&#x91CF;</span>
w = w.reshape([<span class="hljs-number">1</span>, <span class="hljs-number">1</span>, <span class="hljs-number">1</span>, <span class="hljs-number">3</span>])
<span class="hljs-comment"># &#x521B;&#x5EFA;&#x5377;&#x79EF;&#x7B97;&#x5B50;&#xFF0C;&#x8BBE;&#x7F6E;&#x8F93;&#x51FA;&#x901A;&#x9053;&#x6570;&#xFF0C;&#x5377;&#x79EF;&#x6838;&#x5927;&#x5C0F;&#xFF0C;&#x548C;&#x521D;&#x59CB;&#x5316;&#x6743;&#x91CD;&#x53C2;&#x6570;</span>
<span class="hljs-comment"># kernel_size = [1, 3]&#x8868;&#x793A;kh = 1, kw=3</span>
<span class="hljs-comment"># &#x521B;&#x5EFA;&#x5377;&#x79EF;&#x7B97;&#x5B50;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x901A;&#x8FC7;&#x53C2;&#x6570;&#x5C5E;&#x6027;weight_attr&#x6307;&#x5B9A;&#x53C2;&#x6570;&#x521D;&#x59CB;&#x5316;&#x65B9;&#x5F0F;</span>
<span class="hljs-comment"># &#x8FD9;&#x91CC;&#x7684;&#x521D;&#x59CB;&#x5316;&#x65B9;&#x5F0F;&#x65F6;&#xFF0C;&#x4ECE;numpy.ndarray&#x521D;&#x59CB;&#x5316;&#x5377;&#x79EF;&#x53C2;&#x6570;</span>
conv = Conv2D(in_channels=<span class="hljs-number">1</span>, out_channels=<span class="hljs-number">1</span>, kernel_size=[<span class="hljs-number">1</span>, <span class="hljs-number">3</span>],
       weight_attr=paddle.ParamAttr(
          initializer=Assign(value=w)))

<span class="hljs-comment"># &#x521B;&#x5EFA;&#x8F93;&#x5165;&#x56FE;&#x7247;&#xFF0C;&#x56FE;&#x7247;&#x5DE6;&#x8FB9;&#x7684;&#x50CF;&#x7D20;&#x70B9;&#x53D6;&#x503C;&#x4E3A;1&#xFF0C;&#x53F3;&#x8FB9;&#x7684;&#x50CF;&#x7D20;&#x70B9;&#x53D6;&#x503C;&#x4E3A;0</span>
img = np.ones([<span class="hljs-number">50</span>,<span class="hljs-number">50</span>], dtype=<span class="hljs-string">&apos;float32&apos;</span>)
img[:, <span class="hljs-number">30</span>:] = <span class="hljs-number">0.</span>
<span class="hljs-comment"># &#x5C06;&#x56FE;&#x7247;&#x5F62;&#x72B6;&#x8C03;&#x6574;&#x4E3A;[N, C, H, W]&#x7684;&#x5F62;&#x5F0F;</span>
x = img.reshape([<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">50</span>,<span class="hljs-number">50</span>])
<span class="hljs-comment"># &#x5C06;numpy.ndarray&#x8F6C;&#x5316;&#x6210;paddle&#x4E2D;&#x7684;tensor</span>
x = paddle.to_tensor(x)
<span class="hljs-comment"># &#x4F7F;&#x7528;&#x5377;&#x79EF;&#x7B97;&#x5B50;&#x4F5C;&#x7528;&#x5728;&#x8F93;&#x5165;&#x56FE;&#x7247;&#x4E0A;</span>
y = conv(x)
<span class="hljs-comment"># &#x5C06;&#x8F93;&#x51FA;tensor&#x8F6C;&#x5316;&#x4E3A;numpy.ndarray</span>
out = y.numpy()
f = plt.subplot(<span class="hljs-number">121</span>)
f.set_title(<span class="hljs-string">&apos;input image&apos;</span>, fontsize=<span class="hljs-number">15</span>)
plt.imshow(img, cmap=<span class="hljs-string">&apos;gray&apos;</span>)
f = plt.subplot(<span class="hljs-number">122</span>)
f.set_title(<span class="hljs-string">&apos;output featuremap&apos;</span>, fontsize=<span class="hljs-number">15</span>)
<span class="hljs-comment"># &#x5377;&#x79EF;&#x7B97;&#x5B50;Conv2D&#x8F93;&#x51FA;&#x6570;&#x636E;&#x5F62;&#x72B6;&#x4E3A;[N, C, H, W]&#x5F62;&#x5F0F;</span>
<span class="hljs-comment"># &#x6B64;&#x5904;N, C=1&#xFF0C;&#x8F93;&#x51FA;&#x6570;&#x636E;&#x5F62;&#x72B6;&#x4E3A;[1, 1, H, W]&#xFF0C;&#x662F;4&#x7EF4;&#x6570;&#x7EC4;</span>
<span class="hljs-comment"># &#x4F46;&#x662F;&#x753B;&#x56FE;&#x51FD;&#x6570;plt.imshow&#x753B;&#x7070;&#x5EA6;&#x56FE;&#x65F6;&#xFF0C;&#x53EA;&#x63A5;&#x53D7;2&#x7EF4;&#x6570;&#x7EC4;</span>
<span class="hljs-comment"># &#x901A;&#x8FC7;numpy.squeeze&#x51FD;&#x6570;&#x5C06;&#x5927;&#x5C0F;&#x4E3A;1&#x7684;&#x7EF4;&#x5EA6;&#x6D88;&#x9664;</span>
plt.imshow(out.squeeze(), cmap=<span class="hljs-string">&apos;gray&apos;</span>)
plt.show()
<span class="hljs-comment"># &#x67E5;&#x770B;&#x5377;&#x79EF;&#x5C42;&#x7684;&#x6743;&#x91CD;&#x53C2;&#x6570;&#x540D;&#x5B57;&#x548C;&#x6570;&#x503C;</span>
print(conv.weight)
<span class="hljs-comment"># &#x53C2;&#x770B;&#x5377;&#x79EF;&#x5C42;&#x7684;&#x504F;&#x7F6E;&#x53C2;&#x6570;&#x540D;&#x5B57;&#x548C;&#x6570;&#x503C;</span>
print(conv.bias)
</code></pre>
<p><strong>&#x6848;&#x4F8B;2&#x2014;&#x2014;&#x56FE;&#x50CF;&#x4E2D;&#x7269;&#x4F53;&#x8FB9;&#x7F18;&#x68C0;&#x6D4B;</strong></p>
<p>&#x4E0A;&#x9762;&#x5C55;&#x793A;&#x7684;&#x662F;&#x4E00;&#x4E2A;&#x4EBA;&#x4E3A;&#x6784;&#x9020;&#x51FA;&#x6765;&#x7684;&#x7B80;&#x5355;&#x56FE;&#x7247;&#xFF0C;&#x4F7F;&#x7528;&#x5377;&#x79EF;&#x7F51;&#x7EDC;&#x68C0;&#x6D4B;&#x56FE;&#x7247;&#x660E;&#x6697;&#x5206;&#x754C;&#x5904;&#x7684;&#x793A;&#x4F8B;&#x3002;&#x5BF9;&#x4E8E;&#x771F;&#x5B9E;&#x7684;&#x56FE;&#x7247;&#xFF0C;&#x4E5F;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;&#x5408;&#x9002;&#x7684;&#x5377;&#x79EF;&#x6838;(3*3&#x5377;&#x79EF;&#x6838;&#x7684;&#x4E2D;&#x95F4;&#x503C;&#x662F;8&#xFF0C;&#x5468;&#x56F4;&#x4E00;&#x5708;&#x7684;&#x503C;&#x662F;8&#x4E2A;-1)&#x5BF9;&#x5176;&#x8FDB;&#x884C;&#x64CD;&#x4F5C;&#xFF0C;&#x7528;&#x6765;&#x68C0;&#x6D4B;&#x7269;&#x4F53;&#x7684;&#x5916;&#x5F62;&#x8F6E;&#x5ED3;&#xFF0C;&#x89C2;&#x5BDF;&#x8F93;&#x51FA;&#x7279;&#x5F81;&#x56FE;&#x8DDF;&#x539F;&#x56FE;&#x4E4B;&#x95F4;&#x7684;&#x5BF9;&#x5E94;&#x5173;&#x7CFB;&#xFF0C;&#x5982;&#x4E0B;&#x4EE3;&#x7801;&#x6240;&#x793A;&#xFF1A;</p>
<pre><code>import matplotlib.pyplot as plt
from PIL import Image
import numpy as np
import paddle
from paddle.nn import Conv2D
from paddle.nn.initializer import Assign
img = Image.open(&apos;./work/images/section1/000000098520.jpg&apos;)

# &#x8BBE;&#x7F6E;&#x5377;&#x79EF;&#x6838;&#x53C2;&#x6570;
w = np.array([[-1,-1,-1], [-1,8,-1], [-1,-1,-1]], dtype=&apos;float32&apos;)/8
w = w.reshape([1, 1, 3, 3])
# &#x7531;&#x4E8E;&#x8F93;&#x5165;&#x901A;&#x9053;&#x6570;&#x662F;3&#xFF0C;&#x5C06;&#x5377;&#x79EF;&#x6838;&#x7684;&#x5F62;&#x72B6;&#x4ECE;[1,1,3,3]&#x8C03;&#x6574;&#x4E3A;[1,3,3,3]
w = np.repeat(w, 3, axis=1)
# &#x521B;&#x5EFA;&#x5377;&#x79EF;&#x7B97;&#x5B50;&#xFF0C;&#x8F93;&#x51FA;&#x901A;&#x9053;&#x6570;&#x4E3A;1&#xFF0C;&#x5377;&#x79EF;&#x6838;&#x5927;&#x5C0F;&#x4E3A;3x3&#xFF0C;
# &#x5E76;&#x4F7F;&#x7528;&#x4E0A;&#x9762;&#x7684;&#x8BBE;&#x7F6E;&#x597D;&#x7684;&#x6570;&#x503C;&#x4F5C;&#x4E3A;&#x5377;&#x79EF;&#x6838;&#x6743;&#x91CD;&#x7684;&#x521D;&#x59CB;&#x5316;&#x53C2;&#x6570;
conv = Conv2D(in_channels=3, out_channels=1, kernel_size=[3, 3], 
            weight_attr=paddle.ParamAttr(
              initializer=Assign(value=w)))

# &#x5C06;&#x8BFB;&#x5165;&#x7684;&#x56FE;&#x7247;&#x8F6C;&#x5316;&#x4E3A;float32&#x7C7B;&#x578B;&#x7684;numpy.ndarray
x = np.array(img).astype(&apos;float32&apos;)
# &#x56FE;&#x7247;&#x8BFB;&#x5165;&#x6210;ndarry&#x65F6;&#xFF0C;&#x5F62;&#x72B6;&#x662F;[H, W, 3]&#xFF0C;
# &#x5C06;&#x901A;&#x9053;&#x8FD9;&#x4E00;&#x7EF4;&#x5EA6;&#x8C03;&#x6574;&#x5230;&#x6700;&#x524D;&#x9762;
x = np.transpose(x, (2,0,1))
# &#x5C06;&#x6570;&#x636E;&#x5F62;&#x72B6;&#x8C03;&#x6574;&#x4E3A;[N, C, H, W]&#x683C;&#x5F0F;
x = x.reshape(1, 3, img.height, img.width)
x = paddle.to_tensor(x)
y = conv(x)
out = y.numpy()
plt.figure(figsize=(20, 10))
f = plt.subplot(121)
f.set_title(&apos;input image&apos;, fontsize=15)
plt.imshow(img)
f = plt.subplot(122)
f.set_title(&apos;output feature map&apos;, fontsize=15)
plt.imshow(out.squeeze(), cmap=&apos;gray&apos;)
plt.show()
</code></pre><p><strong>&#x6848;&#x4F8B;3&#x2014;&#x2014;&#x56FE;&#x50CF;&#x5747;&#x503C;&#x6A21;&#x7CCA;</strong></p>
<p>&#x53E6;&#x5916;&#x4E00;&#x79CD;&#x6BD4;&#x8F83;&#x5E38;&#x89C1;&#x7684;&#x5377;&#x79EF;&#x6838;&#xFF08;5*5&#x7684;&#x5377;&#x79EF;&#x6838;&#x4E2D;&#x6BCF;&#x4E2A;&#x503C;&#x5747;&#x4E3A;1&#xFF09;&#x662F;&#x7528;&#x5F53;&#x524D;&#x50CF;&#x7D20;&#x8DDF;&#x5B83;&#x90BB;&#x57DF;&#x5185;&#x7684;&#x50CF;&#x7D20;&#x53D6;&#x5E73;&#x5747;&#xFF0C;&#x8FD9;&#x6837;&#x53EF;&#x4EE5;&#x4F7F;&#x56FE;&#x50CF;&#x4E0A;&#x566A;&#x58F0;&#x6BD4;&#x8F83;&#x5927;&#x7684;&#x70B9;&#x53D8;&#x5F97;&#x66F4;&#x5E73;&#x6ED1;&#xFF0C;&#x5982;&#x4E0B;&#x4EE3;&#x7801;&#x6240;&#x793A;&#xFF1A;</p>
<pre><code>import paddle
import matplotlib.pyplot as plt
from PIL import Image
import numpy as np
from paddle.nn import Conv2D
from paddle.nn.initializer import Assign
# &#x8BFB;&#x5165;&#x56FE;&#x7247;&#x5E76;&#x8F6C;&#x6210;numpy.ndarray
# &#x6362;&#x6210;&#x7070;&#x5EA6;&#x56FE;
img = Image.open(&apos;./work/images/section1/000000355610.jpg&apos;).convert(&apos;L&apos;)
img = np.array(img)

# &#x521B;&#x5EFA;&#x521D;&#x59CB;&#x5316;&#x53C2;&#x6570;
w = np.ones([1, 1, 5, 5], dtype = &apos;float32&apos;)/25
conv = Conv2D(in_channels=1, out_channels=1, kernel_size=[5, 5], 
        weight_attr=paddle.ParamAttr(
         initializer=Assign(value=w)))
x = img.astype(&apos;float32&apos;)
x = x.reshape(1,1,img.shape[0], img.shape[1])
x = paddle.to_tensor(x)
y = conv(x)
out = y.numpy()

plt.figure(figsize=(20, 12))
f = plt.subplot(121)
f.set_title(&apos;input image&apos;)
plt.imshow(img, cmap=&apos;gray&apos;)

f = plt.subplot(122)
f.set_title(&apos;output feature map&apos;)
out = out.squeeze()
plt.imshow(out, cmap=&apos;gray&apos;)

plt.show()
</code></pre><h2 id="&#x6C60;&#x5316;&#xFF08;pooling&#xFF09;">&#x6C60;&#x5316;&#xFF08;Pooling&#xFF09;</h2>
<p>&#x6C60;&#x5316;&#x662F;&#x4F7F;&#x7528;&#x67D0;&#x4E00;&#x4F4D;&#x7F6E;&#x7684;&#x76F8;&#x90BB;&#x8F93;&#x51FA;&#x7684;&#x603B;&#x4F53;&#x7EDF;&#x8BA1;&#x7279;&#x5F81;&#x4EE3;&#x66FF;&#x7F51;&#x7EDC;&#x5728;&#x8BE5;&#x4F4D;&#x7F6E;&#x7684;&#x8F93;&#x51FA;&#xFF0C;&#x5176;&#x597D;&#x5904;&#x662F;&#x5F53;&#x8F93;&#x5165;&#x6570;&#x636E;&#x505A;&#x51FA;&#x5C11;&#x91CF;&#x5E73;&#x79FB;&#x65F6;&#xFF0C;&#x7ECF;&#x8FC7;&#x6C60;&#x5316;&#x51FD;&#x6570;&#x540E;&#x7684;&#x5927;&#x591A;&#x6570;&#x8F93;&#x51FA;&#x8FD8;&#x80FD;&#x4FDD;&#x6301;&#x4E0D;&#x53D8;&#x3002;&#x6BD4;&#x5982;&#xFF1A;&#x5F53;&#x8BC6;&#x522B;&#x4E00;&#x5F20;&#x56FE;&#x50CF;&#x662F;&#x5426;&#x662F;&#x4EBA;&#x8138;&#x65F6;&#xFF0C;&#x6211;&#x4EEC;&#x9700;&#x8981;&#x77E5;&#x9053;&#x4EBA;&#x8138;&#x5DE6;&#x8FB9;&#x6709;&#x4E00;&#x53EA;&#x773C;&#x775B;&#xFF0C;&#x53F3;&#x8FB9;&#x4E5F;&#x6709;&#x4E00;&#x53EA;&#x773C;&#x775B;&#xFF0C;&#x800C;&#x4E0D;&#x9700;&#x8981;&#x77E5;&#x9053;&#x773C;&#x775B;&#x7684;&#x7CBE;&#x786E;&#x4F4D;&#x7F6E;&#xFF0C;&#x8FD9;&#x65F6;&#x5019;&#x901A;&#x8FC7;&#x6C60;&#x5316;&#x67D0;&#x4E00;&#x7247;&#x533A;&#x57DF;&#x7684;&#x50CF;&#x7D20;&#x70B9;&#x6765;&#x5F97;&#x5230;&#x603B;&#x4F53;&#x7EDF;&#x8BA1;&#x7279;&#x5F81;&#x4F1A;&#x663E;&#x5F97;&#x5F88;&#x6709;&#x7528;&#x3002;&#x7531;&#x4E8E;&#x6C60;&#x5316;&#x4E4B;&#x540E;&#x7279;&#x5F81;&#x56FE;&#x4F1A;&#x53D8;&#x5F97;&#x66F4;&#x5C0F;&#xFF0C;&#x5982;&#x679C;&#x540E;&#x9762;&#x8FDE;&#x63A5;&#x7684;&#x662F;&#x5168;&#x8FDE;&#x63A5;&#x5C42;&#xFF0C;&#x80FD;&#x6709;&#x6548;&#x7684;&#x51CF;&#x5C0F;&#x795E;&#x7ECF;&#x5143;&#x7684;&#x4E2A;&#x6570;&#xFF0C;&#x8282;&#x7701;&#x5B58;&#x50A8;&#x7A7A;&#x95F4;&#x5E76;&#x63D0;&#x9AD8;&#x8BA1;&#x7B97;&#x6548;&#x7387;&#x3002; &#x5982; <strong>&#x56FE;15</strong> &#x6240;&#x793A;&#xFF0C;&#x5C06;&#x4E00;&#x4E2A; 22&#xD7;2&#x7684;&#x533A;&#x57DF;&#x6C60;&#x5316;&#x6210;&#x4E00;&#x4E2A;&#x50CF;&#x7D20;&#x70B9;&#x3002;&#x901A;&#x5E38;&#x6709;&#x4E24;&#x79CD;&#x65B9;&#x6CD5;&#xFF0C;&#x5E73;&#x5747;&#x6C60;&#x5316;&#x548C;&#x6700;&#x5927;&#x6C60;&#x5316;&#x3002;</p>
<p><img src="https://ai-studio-static-online.cdn.bcebos.com/5479daa3734d424bb710615d3c4f7e017ba2558808a8421ca7c914f3fced0a48" alt="img"></p>
<p>&#x56FE;15&#xFF1A;&#x6C60;&#x5316;</p>
<ul>
<li>&#x5982;&#x56FE;15&#xFF08;a&#xFF09;&#xFF1A;&#x5E73;&#x5747;&#x6C60;&#x5316;&#x3002;&#x8FD9;&#x91CC;&#x4F7F;&#x7528;&#x5927;&#x5C0F;&#x4E3A;2&#xD7;2&#x7684;&#x6C60;&#x5316;&#x7A97;&#x53E3;&#xFF0C;&#x6BCF;&#x6B21;&#x79FB;&#x52A8;&#x7684;&#x6B65;&#x5E45;&#x4E3A;2&#xFF0C;&#x5BF9;&#x6C60;&#x5316;&#x7A97;&#x53E3;&#x8986;&#x76D6;&#x533A;&#x57DF;&#x5185;&#x7684;&#x50CF;&#x7D20;&#x53D6;&#x5E73;&#x5747;&#x503C;&#xFF0C;&#x5F97;&#x5230;&#x76F8;&#x5E94;&#x7684;&#x8F93;&#x51FA;&#x7279;&#x5F81;&#x56FE;&#x7684;&#x50CF;&#x7D20;&#x503C;&#x3002;</li>
<li>&#x5982;&#x56FE;15&#xFF08;b&#xFF09;&#xFF1A;&#x6700;&#x5927;&#x6C60;&#x5316;&#x3002;&#x5BF9;&#x6C60;&#x5316;&#x7A97;&#x53E3;&#x8986;&#x76D6;&#x533A;&#x57DF;&#x5185;&#x7684;&#x50CF;&#x7D20;&#x53D6;&#x6700;&#x5927;&#x503C;&#xFF0C;&#x5F97;&#x5230;&#x8F93;&#x51FA;&#x7279;&#x5F81;&#x56FE;&#x7684;&#x50CF;&#x7D20;&#x503C;&#x3002;&#x5F53;&#x6C60;&#x5316;&#x7A97;&#x53E3;&#x5728;&#x56FE;&#x7247;&#x4E0A;&#x6ED1;&#x52A8;&#x65F6;&#xFF0C;&#x4F1A;&#x5F97;&#x5230;&#x6574;&#x5F20;&#x8F93;&#x51FA;&#x7279;&#x5F81;&#x56FE;&#x3002;&#x6C60;&#x5316;&#x7A97;&#x53E3;&#x7684;&#x5927;&#x5C0F;&#x79F0;&#x4E3A;&#x6C60;&#x5316;&#x5927;&#x5C0F;&#xFF0C;&#x7528;$k_h \times k_w$&#x8868;&#x793A;&#x3002;&#x5728;&#x5377;&#x79EF;&#x795E;&#x7ECF;&#x7F51;&#x7EDC;&#x4E2D;&#x7528;&#x7684;&#x6BD4;&#x8F83;&#x591A;&#x7684;&#x662F;&#x7A97;&#x53E3;&#x5927;&#x5C0F;&#x4E3A;2&#xD7;2&#xFF0C;&#x6B65;&#x5E45;&#x4E3A;2&#x7684;&#x6C60;&#x5316;&#x3002;</li>
</ul>
<p>&#x4E0E;&#x5377;&#x79EF;&#x6838;&#x7C7B;&#x4F3C;&#xFF0C;&#x6C60;&#x5316;&#x7A97;&#x53E3;&#x5728;&#x56FE;&#x7247;&#x4E0A;&#x6ED1;&#x52A8;&#x65F6;&#xFF0C;&#x6BCF;&#x6B21;&#x79FB;&#x52A8;&#x7684;&#x6B65;&#x957F;&#x79F0;&#x4E3A;&#x6B65;&#x5E45;&#xFF0C;&#x5F53;&#x5BBD;&#x548C;&#x9AD8;&#x65B9;&#x5411;&#x7684;&#x79FB;&#x52A8;&#x5927;&#x5C0F;&#x4E0D;&#x4E00;&#x6837;&#x65F6;&#xFF0C;&#x5206;&#x522B;&#x7528;$s<em>w$&#x548C;$s_h$&#x8868;&#x793A;&#x3002;&#x4E5F;&#x53EF;&#x4EE5;&#x5BF9;&#x9700;&#x8981;&#x8FDB;&#x884C;&#x6C60;&#x5316;&#x7684;&#x56FE;&#x7247;&#x8FDB;&#x884C;&#x586B;&#x5145;&#xFF0C;&#x586B;&#x5145;&#x65B9;&#x5F0F;&#x4E0E;&#x5377;&#x79EF;&#x7C7B;&#x4F3C;&#xFF0C;&#x5047;&#x8BBE;&#x5728;&#x7B2C;&#x4E00;&#x884C;&#x4E4B;&#x524D;&#x586B;&#x5145;$p</em>{h1}$&#x884C;&#xFF0C;&#x5728;&#x6700;&#x540E;&#x4E00;&#x884C;&#x540E;&#x9762;&#x586B;&#x5145;$p<em>{h2}$&#x884C;&#x3002;&#x5728;&#x7B2C;&#x4E00;&#x5217;&#x4E4B;&#x524D;&#x586B;&#x5145;$p</em>{w1}$&#x5217;&#xFF0C;&#x5728;&#x6700;&#x540E;&#x4E00;&#x5217;&#x4E4B;&#x540E;&#x586B;&#x5145;$p_{w2}$&#x5217;&#xFF0C;&#x5219;&#x6C60;&#x5316;&#x5C42;&#x7684;&#x8F93;&#x51FA;&#x7279;&#x5F81;&#x56FE;&#x5927;&#x5C0F;&#x4E3A;&#xFF1A;</p>
<p>$H<em>{out} = \frac{H + p</em>{h1} + p_{h2} - k_h}{s_h} + 1$</p>
<p>$W<em>{out} = \frac{W + p</em>{w1} + p_{w2} - k_w}{s_w} + 1$</p>
<p>&#x5728;&#x5377;&#x79EF;&#x795E;&#x7ECF;&#x7F51;&#x7EDC;&#x4E2D;&#xFF0C;&#x901A;&#x5E38;&#x4F7F;&#x7528;2&#xD7;2&#x5927;&#x5C0F;&#x7684;&#x6C60;&#x5316;&#x7A97;&#x53E3;&#xFF0C;&#x6B65;&#x5E45;&#x4E5F;&#x4F7F;&#x7528;2&#xFF0C;&#x586B;&#x5145;&#x4E3A;0&#xFF0C;&#x5219;&#x8F93;&#x51FA;&#x7279;&#x5F81;&#x56FE;&#x7684;&#x5C3A;&#x5BF8;&#x4E3A;&#xFF1A;</p>
<p>$H_{out} = \frac{H}{2}$</p>
<p>$W_{out} = \frac{W}{2}$</p>
<p>&#x901A;&#x8FC7;&#x8FD9;&#x79CD;&#x65B9;&#x5F0F;&#x7684;&#x6C60;&#x5316;&#xFF0C;&#x8F93;&#x51FA;&#x7279;&#x5F81;&#x56FE;&#x7684;&#x9AD8;&#x548C;&#x5BBD;&#x90FD;&#x51CF;&#x534A;&#xFF0C;&#x4F46;&#x901A;&#x9053;&#x6570;&#x4E0D;&#x4F1A;&#x6539;&#x53D8;&#x3002;</p>
<h2 id="relu&#x6FC0;&#x6D3B;&#x51FD;&#x6570;">ReLU&#x6FC0;&#x6D3B;&#x51FD;&#x6570;</h2>
<p>&#x524D;&#x9762;&#x4ECB;&#x7ECD;&#x7684;&#x7F51;&#x7EDC;&#x7ED3;&#x6784;&#x4E2D;&#xFF0C;&#x666E;&#x904D;&#x4F7F;&#x7528;Sigmoid&#x51FD;&#x6570;&#x505A;&#x6FC0;&#x6D3B;&#x51FD;&#x6570;&#x3002;&#x5728;&#x795E;&#x7ECF;&#x7F51;&#x7EDC;&#x53D1;&#x5C55;&#x7684;&#x65E9;&#x671F;&#xFF0C;Sigmoid&#x51FD;&#x6570;&#x7528;&#x7684;&#x6BD4;&#x8F83;&#x591A;&#xFF0C;&#x800C;&#x76EE;&#x524D;&#x7528;&#x7684;&#x8F83;&#x591A;&#x7684;&#x6FC0;&#x6D3B;&#x51FD;&#x6570;&#x662F;ReLU&#x3002;&#x8FD9;&#x662F;&#x56E0;&#x4E3A;Sigmoid&#x51FD;&#x6570;&#x5728;&#x53CD;&#x5411;&#x4F20;&#x64AD;&#x8FC7;&#x7A0B;&#x4E2D;&#xFF0C;&#x5BB9;&#x6613;&#x9020;&#x6210;&#x68AF;&#x5EA6;&#x7684;&#x8870;&#x51CF;&#x3002;&#x8BA9;&#x6211;&#x4EEC;&#x4ED4;&#x7EC6;&#x89C2;&#x5BDF;Sigmoid&#x51FD;&#x6570;&#x7684;&#x5F62;&#x5F0F;&#xFF0C;&#x5C31;&#x80FD;&#x53D1;&#x73B0;&#x8FD9;&#x4E00;&#x95EE;&#x9898;&#x3002;</p>
<p>Sigmoid&#x6FC0;&#x6D3B;&#x51FD;&#x6570;&#x5B9A;&#x4E49;&#x5982;&#x4E0B;&#xFF1A;</p>
<p>$y = \frac{1}{1 + e^{-x}}$</p>
<p>&#x4E0B;&#x9762;&#x7684;&#x7A0B;&#x5E8F;&#x753B;&#x51FA;&#x4E86;Sigmoid&#x548C;ReLU&#x51FD;&#x6570;&#x7684;&#x66F2;&#x7EBF;&#x56FE;&#xFF1A;</p>
<pre><code># ReLU&#x548C;Sigmoid&#x6FC0;&#x6D3B;&#x51FD;&#x6570;&#x793A;&#x610F;&#x56FE;
import numpy as np
import matplotlib.pyplot as plt
import matplotlib.patches as patches
plt.figure(figsize=(10, 5))

# &#x521B;&#x5EFA;&#x6570;&#x636E;x
x = np.arange(-10, 10, 0.1)

# &#x8BA1;&#x7B97;Sigmoid&#x51FD;&#x6570;
s = 1.0 / (1 + np.exp(0. - x))

# &#x8BA1;&#x7B97;ReLU&#x51FD;&#x6570;
y = np.clip(x, a_min=0., a_max=None)

#####################################
# &#x4EE5;&#x4E0B;&#x90E8;&#x5206;&#x4E3A;&#x753B;&#x56FE;&#x4EE3;&#x7801;
f = plt.subplot(121)
plt.plot(x, s, color=&apos;r&apos;)
currentAxis=plt.gca()
plt.text(-9.0, 0.9, r&apos;$y=Sigmoid(x)$&apos;, fontsize=13)
currentAxis.xaxis.set_label_text(&apos;x&apos;, fontsize=15)
currentAxis.yaxis.set_label_text(&apos;y&apos;, fontsize=15)

f = plt.subplot(122)
plt.plot(x, y, color=&apos;g&apos;)
plt.text(-3.0, 9, r&apos;$y=ReLU(x)$&apos;, fontsize=13)
currentAxis=plt.gca()
currentAxis.xaxis.set_label_text(&apos;x&apos;, fontsize=15)
currentAxis.yaxis.set_label_text(&apos;y&apos;, fontsize=15)

plt.show()
</code></pre><p><img src="https://gitee.com/xuyouqian/drawing-bed/raw/master/img/20220202110913.png" alt=""></p>
<p><strong>&#x68AF;&#x5EA6;&#x6D88;&#x5931;&#x73B0;&#x8C61;</strong></p>
<p>&#x5728;&#x795E;&#x7ECF;&#x7F51;&#x7EDC;&#x91CC;&#xFF0C;&#x5C06;&#x7ECF;&#x8FC7;&#x53CD;&#x5411;&#x4F20;&#x64AD;&#x4E4B;&#x540E;&#xFF0C;&#x68AF;&#x5EA6;&#x503C;&#x8870;&#x51CF;&#x5230;&#x63A5;&#x8FD1;&#x4E8E;&#x96F6;&#x7684;&#x73B0;&#x8C61;&#x79F0;&#x4F5C;&#x68AF;&#x5EA6;&#x6D88;&#x5931;&#x73B0;&#x8C61;&#x3002;</p>
<p>&#x4ECE;&#x4E0A;&#x9762;&#x7684;&#x51FD;&#x6570;&#x66F2;&#x7EBF;&#x53EF;&#x4EE5;&#x770B;&#x51FA;&#xFF0C;&#x5F53;x&#x4E3A;&#x8F83;&#x5927;&#x7684;&#x6B63;&#x6570;&#x7684;&#x65F6;&#x5019;&#xFF0C;Sigmoid&#x51FD;&#x6570;&#x6570;&#x503C;&#x975E;&#x5E38;&#x63A5;&#x8FD1;&#x4E8E;1&#xFF0C;&#x51FD;&#x6570;&#x66F2;&#x7EBF;&#x53D8;&#x5F97;&#x5F88;&#x5E73;&#x6ED1;&#xFF0C;&#x5728;&#x8FD9;&#x4E9B;&#x533A;&#x57DF;Sigmoid&#x51FD;&#x6570;&#x7684;&#x5BFC;&#x6570;&#x63A5;&#x8FD1;&#x4E8E;&#x96F6;&#x3002;&#x5F53;x&#x4E3A;&#x8F83;&#x5C0F;&#x7684;&#x8D1F;&#x6570;&#x65F6;&#xFF0C;Sigmoid&#x51FD;&#x6570;&#x503C;&#x4E5F;&#x975E;&#x5E38;&#x63A5;&#x8FD1;&#x4E8E;0&#xFF0C;&#x51FD;&#x6570;&#x66F2;&#x7EBF;&#x4E5F;&#x5F88;&#x5E73;&#x6ED1;&#xFF0C;&#x5728;&#x8FD9;&#x4E9B;&#x533A;&#x57DF;Sigmoid&#x51FD;&#x6570;&#x7684;&#x5BFC;&#x6570;&#x4E5F;&#x63A5;&#x8FD1;&#x4E8E;0&#x3002;&#x53EA;&#x6709;&#x5F53;xx<em>x</em>&#x7684;&#x53D6;&#x503C;&#x5728;0&#x9644;&#x8FD1;&#x65F6;&#xFF0C;Sigmoid&#x51FD;&#x6570;&#x7684;&#x5BFC;&#x6570;&#x624D;&#x6BD4;&#x8F83;&#x5927;&#x3002;&#x5BF9;Sigmoid&#x51FD;&#x6570;&#x6C42;&#x5BFC;&#x6570;&#xFF0C;&#x7ED3;&#x679C;&#x5982;&#x4E0B;&#x6240;&#x793A;&#xFF1A;</p>
<p>$$
\frac{dy}{dx} = -\frac{1}{(1+e^{-x})^2} \cdot \frac{d(e^{-x})}{dx} = \frac{1}{2 + e^x + e^{-x}}</p>
<p>$$</p>
<p>&#x4ECE;&#x4E0A;&#x9762;&#x7684;&#x5F0F;&#x5B50;&#x53EF;&#x4EE5;&#x770B;&#x51FA;&#xFF0C;Sigmoid&#x51FD;&#x6570;&#x7684;&#x5BFC;&#x6570;$\frac{dy}{dx}$&#x6700;&#x5927;&#x503C;&#x4E3A;$\frac{1}{4}$&#x3002;&#x524D;&#x5411;&#x4F20;&#x64AD;&#x65F6;&#xFF0C;$y=Sigmoid(x)$&#xFF1B;&#x800C;&#x5728;&#x53CD;&#x5411;&#x4F20;&#x64AD;&#x8FC7;&#x7A0B;&#x4E2D;&#xFF0C;x&#x7684;&#x68AF;&#x5EA6;&#x7B49;&#x4E8E;y&#x7684;&#x68AF;&#x5EA6;&#x4E58;&#x4EE5;Sigmoid&#x51FD;&#x6570;&#x7684;&#x5BFC;&#x6570;&#xFF0C;&#x5982;&#x4E0B;&#x6240;&#x793A;&#xFF1A;</p>
<p>$$
\frac{\partial{L}}{\partial{x}}=\frac{\partial{L}}{\partial{y}} \cdot \frac{\partial{y}}{\partial{x}}</p>
<p>$$</p>
<p>&#x4F7F;&#x5F97;x&#x7684;&#x68AF;&#x5EA6;&#x6570;&#x503C;&#x6700;&#x5927;&#x4E5F;&#x4E0D;&#x4F1A;&#x8D85;&#x8FC7;y&#x7684;&#x68AF;&#x5EA6;&#x7684;$\frac{1}{4}$&#x3002;</p>
<p>&#x7531;&#x4E8E;&#x6700;&#x5F00;&#x59CB;&#x662F;&#x5C06;&#x795E;&#x7ECF;&#x7F51;&#x7EDC;&#x7684;&#x53C2;&#x6570;&#x968F;&#x673A;&#x521D;&#x59CB;&#x5316;&#x7684;&#xFF0C;x&#x7684;&#x53D6;&#x503C;&#x5F88;&#x6709;&#x53EF;&#x80FD;&#x5728;&#x5F88;&#x5927;&#x6216;&#x8005;&#x5F88;&#x5C0F;&#x7684;&#x533A;&#x57DF;&#xFF0C;&#x8FD9;&#x4E9B;&#x5730;&#x65B9;&#x90FD;&#x53EF;&#x80FD;&#x9020;&#x6210;Sigmoid&#x51FD;&#x6570;&#x7684;&#x5BFC;&#x6570;&#x63A5;&#x8FD1;&#x4E8E;0&#xFF0C;&#x5BFC;&#x81F4;x&#x7684;&#x68AF;&#x5EA6;&#x63A5;&#x8FD1;&#x4E8E;0&#xFF1B;&#x5373;&#x4F7F;x&#x53D6;&#x503C;&#x5728;&#x63A5;&#x8FD1;&#x4E8E;0&#x7684;&#x5730;&#x65B9;&#xFF0C;&#x6309;&#x4E0A;&#x9762;&#x7684;&#x5206;&#x6790;&#xFF0C;&#x7ECF;&#x8FC7;Sigmoid&#x51FD;&#x6570;&#x53CD;&#x5411;&#x4F20;&#x64AD;&#x4E4B;&#x540E;&#xFF0C;x&#x7684;&#x68AF;&#x5EA6;&#x4E0D;&#x8D85;&#x8FC7;y&#x7684;&#x68AF;&#x5EA6;&#x7684;$\frac{1}{4}$&#xFF0C;&#x5982;&#x679C;&#x6709;&#x591A;&#x5C42;&#x7F51;&#x7EDC;&#x4F7F;&#x7528;&#x4E86;Sigmoid&#x6FC0;&#x6D3B;&#x51FD;&#x6570;&#xFF0C;&#x5219;&#x6BD4;&#x8F83;&#x9760;&#x540E;&#x7684;&#x90A3;&#x4E9B;&#x5C42;&#x68AF;&#x5EA6;&#x5C06;&#x8870;&#x51CF;&#x5230;&#x975E;&#x5E38;&#x5C0F;&#x7684;&#x503C;&#x3002;</p>
<p>ReLU&#x51FD;&#x6570;&#x5219;&#x4E0D;&#x540C;&#xFF0C;&#x867D;&#x7136;&#x5728;x&lt;0&#x7684;&#x5730;&#x65B9;&#xFF0C;ReLU&#x51FD;&#x6570;&#x7684;&#x5BFC;&#x6570;&#x4E3A;0&#x3002;&#x4F46;&#x662F;&#x5728;$x\ge 0$&#x7684;&#x5730;&#x65B9;&#xFF0C;ReLU&#x51FD;&#x6570;&#x7684;&#x5BFC;&#x6570;&#x4E3A;1&#xFF0C;&#x80FD;&#x591F;&#x5C06;y&#x7684;&#x68AF;&#x5EA6;&#x5B8C;&#x6574;&#x7684;&#x4F20;&#x9012;&#x7ED9;x&#xFF0C;&#x800C;&#x4E0D;&#x4F1A;&#x5F15;&#x8D77;&#x68AF;&#x5EA6;&#x6D88;&#x5931;&#x3002;</p>
<h2 id="&#x6279;&#x5F52;&#x4E00;&#x5316;&#xFF08;batch-normalization&#xFF09;">&#x6279;&#x5F52;&#x4E00;&#x5316;&#xFF08;Batch Normalization&#xFF09;</h2>
<p><a href="https://arxiv.org/abs/1502.03167" target="_blank">&#x6279;&#x5F52;&#x4E00;&#x5316;&#x65B9;&#x6CD5;</a>&#xFF08;Batch Normalization&#xFF0C;BatchNorm&#xFF09;&#x662F;&#x7531;Ioffe&#x548C;Szegedy&#x4E8E;2015&#x5E74;&#x63D0;&#x51FA;&#x7684;&#xFF0C;&#x5DF2;&#x88AB;&#x5E7F;&#x6CDB;&#x5E94;&#x7528;&#x5728;&#x6DF1;&#x5EA6;&#x5B66;&#x4E60;&#x4E2D;&#xFF0C;&#x5176;&#x76EE;&#x7684;&#x662F;&#x5BF9;&#x795E;&#x7ECF;&#x7F51;&#x7EDC;&#x4E2D;&#x95F4;&#x5C42;&#x7684;&#x8F93;&#x51FA;&#x8FDB;&#x884C;&#x6807;&#x51C6;&#x5316;&#x5904;&#x7406;&#xFF0C;&#x4F7F;&#x5F97;&#x4E2D;&#x95F4;&#x5C42;&#x7684;&#x8F93;&#x51FA;&#x66F4;&#x52A0;&#x7A33;&#x5B9A;&#x3002;</p>
<p>&#x901A;&#x5E38;&#x6211;&#x4EEC;&#x4F1A;&#x5BF9;&#x795E;&#x7ECF;&#x7F51;&#x7EDC;&#x7684;&#x6570;&#x636E;&#x8FDB;&#x884C;&#x6807;&#x51C6;&#x5316;&#x5904;&#x7406;&#xFF0C;&#x5904;&#x7406;&#x540E;&#x7684;&#x6837;&#x672C;&#x6570;&#x636E;&#x96C6;&#x6EE1;&#x8DB3;&#x5747;&#x503C;&#x4E3A;0&#xFF0C;&#x65B9;&#x5DEE;&#x4E3A;1&#x7684;&#x7EDF;&#x8BA1;&#x5206;&#x5E03;&#xFF0C;&#x8FD9;&#x662F;&#x56E0;&#x4E3A;&#x5F53;&#x8F93;&#x5165;&#x6570;&#x636E;&#x7684;&#x5206;&#x5E03;&#x6BD4;&#x8F83;&#x56FA;&#x5B9A;&#x65F6;&#xFF0C;&#x6709;&#x5229;&#x4E8E;&#x7B97;&#x6CD5;&#x7684;&#x7A33;&#x5B9A;&#x548C;&#x6536;&#x655B;&#x3002;&#x5BF9;&#x4E8E;&#x6DF1;&#x5EA6;&#x795E;&#x7ECF;&#x7F51;&#x7EDC;&#x6765;&#x8BF4;&#xFF0C;&#x7531;&#x4E8E;&#x53C2;&#x6570;&#x662F;&#x4E0D;&#x65AD;&#x66F4;&#x65B0;&#x7684;&#xFF0C;&#x5373;&#x4F7F;&#x8F93;&#x5165;&#x6570;&#x636E;&#x5DF2;&#x7ECF;&#x505A;&#x8FC7;&#x6807;&#x51C6;&#x5316;&#x5904;&#x7406;&#xFF0C;&#x4F46;&#x662F;&#x5BF9;&#x4E8E;&#x6BD4;&#x8F83;&#x9760;&#x540E;&#x7684;&#x90A3;&#x4E9B;&#x5C42;&#xFF0C;&#x5176;&#x63A5;&#x6536;&#x5230;&#x7684;&#x8F93;&#x5165;&#x4ECD;&#x7136;&#x662F;&#x5267;&#x70C8;&#x53D8;&#x5316;&#x7684;&#xFF0C;&#x901A;&#x5E38;&#x4F1A;&#x5BFC;&#x81F4;&#x6570;&#x503C;&#x4E0D;&#x7A33;&#x5B9A;&#xFF0C;&#x6A21;&#x578B;&#x5F88;&#x96BE;&#x6536;&#x655B;&#x3002;BatchNorm&#x80FD;&#x591F;&#x4F7F;&#x795E;&#x7ECF;&#x7F51;&#x7EDC;&#x4E2D;&#x95F4;&#x5C42;&#x7684;&#x8F93;&#x51FA;&#x53D8;&#x5F97;&#x66F4;&#x52A0;&#x7A33;&#x5B9A;&#xFF0C;&#x5E76;&#x6709;&#x5982;&#x4E0B;&#x4E09;&#x4E2A;&#x4F18;&#x70B9;&#xFF1A;</p>
<ul>
<li>&#x4F7F;&#x5B66;&#x4E60;&#x5FEB;&#x901F;&#x8FDB;&#x884C;&#xFF08;&#x80FD;&#x591F;&#x4F7F;&#x7528;&#x8F83;&#x5927;&#x7684;&#x5B66;&#x4E60;&#x7387;&#xFF09;</li>
<li>&#x964D;&#x4F4E;&#x6A21;&#x578B;&#x5BF9;&#x521D;&#x59CB;&#x503C;&#x7684;&#x654F;&#x611F;&#x6027;</li>
<li>&#x4ECE;&#x4E00;&#x5B9A;&#x7A0B;&#x5EA6;&#x4E0A;&#x6291;&#x5236;&#x8FC7;&#x62DF;&#x5408;</li>
</ul>
<p>BatchNorm&#x4E3B;&#x8981;&#x601D;&#x8DEF;&#x662F;&#x5728;&#x8BAD;&#x7EC3;&#x65F6;&#x4EE5;mini-batch&#x4E3A;&#x5355;&#x4F4D;&#xFF0C;&#x5BF9;&#x795E;&#x7ECF;&#x5143;&#x7684;&#x6570;&#x503C;&#x8FDB;&#x884C;&#x5F52;&#x4E00;&#x5316;&#xFF0C;&#x4F7F;&#x6570;&#x636E;&#x7684;&#x5206;&#x5E03;&#x6EE1;&#x8DB3;&#x5747;&#x503C;&#x4E3A;0&#xFF0C;&#x65B9;&#x5DEE;&#x4E3A;1&#x3002;&#x5177;&#x4F53;&#x8BA1;&#x7B97;&#x8FC7;&#x7A0B;&#x5982;&#x4E0B;&#xFF1A;</p>
<p><strong>1. &#x8BA1;&#x7B97;mini-batch&#x5185;&#x6837;&#x672C;&#x7684;&#x5747;&#x503C;</strong></p>
<p>$$
\mu<em>B \leftarrow \frac{1}{m}\sum</em>{i=1}^mx^{(i)}</p>
<p>$$</p>
<p>&#x5176;&#x4E2D;$x^{(i)}$&#x8868;&#x793A;mini-batch&#x4E2D;&#x7684;&#x7B2C;<em>i</em>&#x4E2A;&#x6837;&#x672C;&#x3002;</p>
<p>&#x4F8B;&#x5982;&#x8F93;&#x5165;mini-batch&#x5305;&#x542B;3&#x4E2A;&#x6837;&#x672C;&#xFF0C;&#x6BCF;&#x4E2A;&#x6837;&#x672C;&#x6709;2&#x4E2A;&#x7279;&#x5F81;&#xFF0C;&#x5206;&#x522B;&#x662F;&#xFF1A;</p>
<p>$x^{(1)} = (1,2), \ \ x^{(2)} = (3,6), \ \ x^{(3)} = (5,10)$</p>
<p>&#x5BF9;&#x6BCF;&#x4E2A;&#x7279;&#x5F81;&#x5206;&#x522B;&#x8BA1;&#x7B97;mini-batch&#x5185;&#x6837;&#x672C;&#x7684;&#x5747;&#x503C;&#xFF1A;</p>
<p>$\mu<em>{B0} = \frac{1+3+5}{3} = 3, \ \ \ \mu</em>{B1} = \frac{2+6+10}{3} = 6$</p>
<p>&#x5219;&#x6837;&#x672C;&#x5747;&#x503C;&#x662F;:</p>
<p>$\mu<em>{B} = (\mu</em>{B0}, \mu_{B1}) = (3, 6)$</p>
<p><strong>2. &#x8BA1;&#x7B97;mini-batch&#x5185;&#x6837;&#x672C;&#x7684;&#x65B9;&#x5DEE;</strong></p>
<p>$\sigma<em>B^2 \leftarrow \frac{1}{m}\sum</em>{i=1}^m(x^{(i)} - \mu_B)^2$</p>
<p>&#x4E0A;&#x9762;&#x7684;&#x8BA1;&#x7B97;&#x516C;&#x5F0F;&#x5148;&#x8BA1;&#x7B97;&#x4E00;&#x4E2A;&#x6279;&#x6B21;&#x5185;&#x6837;&#x672C;&#x7684;&#x5747;&#x503C;$\mu_B$&#x548C;&#x65B9;&#x5DEE;$\sigma_B^2$&#xFF0C;&#x7136;&#x540E;&#x518D;&#x5BF9;&#x8F93;&#x5165;&#x6570;&#x636E;&#x505A;&#x5F52;&#x4E00;&#x5316;&#xFF0C;&#x5C06;&#x5176;&#x8C03;&#x6574;&#x6210;&#x5747;&#x503C;&#x4E3A;0&#xFF0C;&#x65B9;&#x5DEE;&#x4E3A;1&#x7684;&#x5206;&#x5E03;&#x3002;</p>
<p>&#x5BF9;&#x4E8E;&#x4E0A;&#x8FF0;&#x7ED9;&#x5B9A;&#x7684;&#x8F93;&#x5165;&#x6570;&#x636E;$x^{(1)}, x^{(2)}, x^{(3)}$&#xFF0C;&#x53EF;&#x4EE5;&#x8BA1;&#x7B97;&#x51FA;&#x6BCF;&#x4E2A;&#x7279;&#x5F81;&#x5BF9;&#x5E94;&#x7684;&#x65B9;&#x5DEE;&#xFF1A;</p>
<p>$\sigma_{B0}^2 = \frac{1}{3} \cdot ((1-3)^2 + (3-3)^2 + (5-3)^2) = \frac{8}{3}$</p>
<p>$\sigma_{B1}^2 = \frac{1}{3} \cdot ((2-6)^2 + (6-6)^2 + (10-6)^2) = \frac{32}{3}$</p>
<p>&#x5219;&#x6837;&#x672C;&#x65B9;&#x5DEE;&#x662F;&#xFF1A;</p>
<p>$\sigma<em>{B}^2 = (\sigma</em>{B0}^2, \sigma_{B1}^2) = (\frac{8}{3}, \frac{32}{3})$</p>
<p><strong>3. &#x8BA1;&#x7B97;&#x6807;&#x51C6;&#x5316;&#x4E4B;&#x540E;&#x7684;&#x8F93;&#x51FA;</strong></p>
<p>$\hat{x}^{(i)} \leftarrow \frac{x^{(i)} - \mu_B}{\sqrt{(\sigma_B^2 + \epsilon)}}$</p>
<p>&#x5176;&#x4E2D;$epsilon$&#x662F;&#x4E00;&#x4E2A;&#x5FAE;&#x5C0F;&#x503C;&#xFF08;$1e-7$&#xFF09;&#xFF0C;&#x5176;&#x4E3B;&#x8981;&#x4F5C;&#x7528;&#x662F;&#x4E3A;&#x4E86;&#x9632;&#x6B62;&#x5206;&#x6BCD;&#x4E3A;0&#x3002;</p>
<p>&#x5BF9;&#x4E8E;&#x4E0A;&#x8FF0;&#x7ED9;&#x5B9A;&#x7684;&#x8F93;&#x5165;&#x6570;&#x636E;$x^{(1)}, x^{(2)}, x^{(3)}$&#xFF0C;&#x53EF;&#x4EE5;&#x8BA1;&#x7B97;&#x51FA;&#x6807;&#x51C6;&#x5316;&#x4E4B;&#x540E;&#x7684;&#x8F93;&#x51FA;&#xFF1A;</p>
<p>$$
\hat{x}^{(1)} = (\frac{1 - 3}{\sqrt{\frac{8}{3}}}, \ \ \frac{2 - 6}{\sqrt{\frac{32}{3}}}) = (-\sqrt{\frac{3}{2}}, \ \ -\sqrt{\frac{3}{2}})</p>
<p>$$</p>
<p>$$
\hat{x}^{(2)} = (\frac{3 - 3}{\sqrt{\frac{8}{3}}}, \ \ \frac{6 - 6}{\sqrt{\frac{32}{3}}}) = (0, \ \ 0)</p>
<p>$$</p>
<p>$$
\hat{x}^{(3)} = (\frac{5 - 3}{\sqrt{\frac{8}{3}}}, \ \ \frac{10 - 6}{\sqrt{\frac{32}{3}}}) = (\sqrt{\frac{3}{2}}, \ \ \sqrt{\frac{3}{2}}) </p>
<p>$$</p>
<ul>
<li>&#x8BFB;&#x8005;&#x53EF;&#x4EE5;&#x81EA;&#x884C;&#x9A8C;&#x8BC1;&#x7531;$)\hat{x}^{(1)}, \hat{x}^{(2)}, \hat{x}^{(3)}$&#x6784;&#x6210;&#x7684;mini-batch&#xFF0C;&#x662F;&#x5426;&#x6EE1;&#x8DB3;&#x5747;&#x503C;&#x4E3A;0&#xFF0C;&#x65B9;&#x5DEE;&#x4E3A;1&#x7684;&#x5206;&#x5E03;&#x3002;</li>
</ul>
<p>&#x5982;&#x679C;&#x5F3A;&#x884C;&#x9650;&#x5236;&#x8F93;&#x51FA;&#x5C42;&#x7684;&#x5206;&#x5E03;&#x662F;&#x6807;&#x51C6;&#x5316;&#x7684;&#xFF0C;&#x53EF;&#x80FD;&#x4F1A;&#x5BFC;&#x81F4;&#x67D0;&#x4E9B;&#x7279;&#x5F81;&#x6A21;&#x5F0F;&#x7684;&#x4E22;&#x5931;&#xFF0C;&#x6240;&#x4EE5;&#x5728;&#x6807;&#x51C6;&#x5316;&#x4E4B;&#x540E;&#xFF0C;BatchNorm&#x4F1A;&#x7D27;&#x63A5;&#x7740;&#x5BF9;&#x6570;&#x636E;&#x505A;&#x7F29;&#x653E;&#x548C;&#x5E73;&#x79FB;&#x3002;</p>
<p>$$
y_i \leftarrow \gamma \hat{x_i} + \beta</p>
<p>$$</p>
<p>&#x5176;&#x4E2D;$\gamma$&#x548C;$\beta$&#x662F;&#x53EF;&#x5B66;&#x4E60;&#x7684;&#x53C2;&#x6570;&#xFF0C;&#x53EF;&#x4EE5;&#x8D4B;&#x521D;&#x59CB;&#x503C;&#x3B3;=1,&#x3B2;=0&#xFF0C;&#x5728;&#x8BAD;&#x7EC3;&#x8FC7;&#x7A0B;&#x4E2D;&#x4E0D;&#x65AD;&#x5B66;&#x4E60;&#x8C03;&#x6574;&#x3002;</p>
<p>&#x4E0A;&#x9762;&#x5217;&#x51FA;&#x7684;&#x662F;BatchNorm&#x65B9;&#x6CD5;&#x7684;&#x8BA1;&#x7B97;&#x903B;&#x8F91;&#xFF0C;&#x4E0B;&#x9762;&#x9488;&#x5BF9;&#x4E24;&#x79CD;&#x7C7B;&#x578B;&#x7684;&#x8F93;&#x5165;&#x6570;&#x636E;&#x683C;&#x5F0F;&#x5206;&#x522B;&#x8FDB;&#x884C;&#x4E3E;&#x4F8B;&#x3002;&#x98DE;&#x6868;&#x652F;&#x6301;&#x8F93;&#x5165;&#x6570;&#x636E;&#x7684;&#x7EF4;&#x5EA6;&#x5927;&#x5C0F;&#x4E3A;2&#x3001;3&#x3001;4&#x3001;5&#x56DB;&#x79CD;&#x60C5;&#x51B5;&#xFF0C;&#x8FD9;&#x91CC;&#x7ED9;&#x51FA;&#x7684;&#x662F;&#x7EF4;&#x5EA6;&#x5927;&#x5C0F;&#x4E3A;2&#x548C;4&#x7684;&#x793A;&#x4F8B;&#x3002;</p>
<ul>
<li><strong>&#x793A;&#x4F8B;&#x4E00;&#xFF1A;</strong> &#x5F53;&#x8F93;&#x5165;&#x6570;&#x636E;&#x5F62;&#x72B6;&#x662F;[<em>N</em>,<em>K</em>]&#x65F6;&#xFF0C;&#x4E00;&#x822C;&#x5BF9;&#x5E94;&#x5168;&#x8FDE;&#x63A5;&#x5C42;&#x7684;&#x8F93;&#x51FA;&#xFF0C;&#x793A;&#x4F8B;&#x4EE3;&#x7801;&#x5982;&#x4E0B;&#x6240;&#x793A;&#x3002;</li>
</ul>
<p>&#x8FD9;&#x79CD;&#x60C5;&#x51B5;&#x4E0B;&#x4F1A;&#x5206;&#x522B;&#x5BF9;K&#x7684;&#x6BCF;&#x4E00;&#x4E2A;&#x5206;&#x91CF;&#x8BA1;&#x7B97;N&#x4E2A;&#x6837;&#x672C;&#x7684;&#x5747;&#x503C;&#x548C;&#x65B9;&#x5DEE;&#xFF0C;&#x6570;&#x636E;&#x548C;&#x53C2;&#x6570;&#x5BF9;&#x5E94;&#x5982;&#x4E0B;&#xFF1A;</p>
<ul>
<li>&#x8F93;&#x5165; x, [N, K]</li>
<li>&#x8F93;&#x51FA; y, [N, K]</li>
<li>&#x5747;&#x503C; $\mu_B$&#xFF0C;[K, ]</li>
<li>&#x65B9;&#x5DEE; $\sigma_B^2$ [K, ]</li>
<li>&#x7F29;&#x653E;&#x53C2;&#x6570;$\gamma$, [K, ]</li>
<li>&#x5E73;&#x79FB;&#x53C2;&#x6570;$\beta$, [K, ]</li>
</ul>
<pre><code># &#x8F93;&#x5165;&#x6570;&#x636E;&#x5F62;&#x72B6;&#x662F; [N, K]&#x65F6;&#x7684;&#x793A;&#x4F8B;
import numpy as np
import paddle
from paddle.nn import BatchNorm1D
# &#x521B;&#x5EFA;&#x6570;&#x636E;
data = np.array([[1,2,3], [4,5,6], [7,8,9]]).astype(&apos;float32&apos;)
# &#x4F7F;&#x7528;BatchNorm1D&#x8BA1;&#x7B97;&#x5F52;&#x4E00;&#x5316;&#x7684;&#x8F93;&#x51FA;
# &#x8F93;&#x5165;&#x6570;&#x636E;&#x7EF4;&#x5EA6;[N, K]&#xFF0C;num_features&#x7B49;&#x4E8E;K
bn = BatchNorm1D(num_features=3)    
x = paddle.to_tensor(data)
y = bn(x)
print(&apos;output of BatchNorm1D Layer: \n {}&apos;.format(y.numpy()))

# &#x4F7F;&#x7528;Numpy&#x8BA1;&#x7B97;&#x5747;&#x503C;&#x3001;&#x65B9;&#x5DEE;&#x548C;&#x5F52;&#x4E00;&#x5316;&#x7684;&#x8F93;&#x51FA;
# &#x8FD9;&#x91CC;&#x5BF9;&#x7B2C;0&#x4E2A;&#x7279;&#x5F81;&#x8FDB;&#x884C;&#x9A8C;&#x8BC1;
a = np.array([1,4,7])
a_mean = a.mean()
a_std = a.std()
b = (a - a_mean) / a_std
print(&apos;std {}, mean {}, \n output {}&apos;.format(a_mean, a_std, b))

# &#x5EFA;&#x8BAE;&#x8BFB;&#x8005;&#x5BF9;&#x7B2C;1&#x548C;&#x7B2C;2&#x4E2A;&#x7279;&#x5F81;&#x8FDB;&#x884C;&#x9A8C;&#x8BC1;&#xFF0C;&#x89C2;&#x5BDF;numpy&#x8BA1;&#x7B97;&#x7ED3;&#x679C;&#x4E0E;paddle&#x8BA1;&#x7B97;&#x7ED3;&#x679C;&#x662F;&#x5426;&#x4E00;&#x81F4;
</code></pre><ul>
<li><strong>&#x793A;&#x4F8B;&#x4E8C;&#xFF1A;</strong> &#x5F53;&#x8F93;&#x5165;&#x6570;&#x636E;&#x5F62;&#x72B6;&#x662F;[<em>N</em>,<em>C</em>,<em>H</em>,<em>W</em>]&#x65F6;&#xFF0C; &#x4E00;&#x822C;&#x5BF9;&#x5E94;&#x5377;&#x79EF;&#x5C42;&#x7684;&#x8F93;&#x51FA;&#xFF0C;&#x793A;&#x4F8B;&#x4EE3;&#x7801;&#x5982;&#x4E0B;&#x6240;&#x793A;&#x3002;</li>
</ul>
<p>&#x8FD9;&#x79CD;&#x60C5;&#x51B5;&#x4E0B;&#x4F1A;&#x6CBF;&#x7740;C&#x8FD9;&#x4E00;&#x7EF4;&#x5EA6;&#x8FDB;&#x884C;&#x5C55;&#x5F00;&#xFF0C;&#x5206;&#x522B;&#x5BF9;&#x6BCF;&#x4E00;&#x4E2A;&#x901A;&#x9053;&#x8BA1;&#x7B97;N&#x4E2A;&#x6837;&#x672C;&#x4E2D;&#x603B;&#x5171;N&#xD7;H&#xD7;WN\times H \times W<em>N</em>&#xD7;<em>H</em>&#xD7;<em>W</em>&#x4E2A;&#x50CF;&#x7D20;&#x70B9;&#x7684;&#x5747;&#x503C;&#x548C;&#x65B9;&#x5DEE;&#xFF0C;&#x6570;&#x636E;&#x548C;&#x53C2;&#x6570;&#x5BF9;&#x5E94;&#x5982;&#x4E0B;&#xFF1A;</p>
<ul>
<li>&#x8F93;&#x5165; x, [N, C, H, W]</li>
<li>&#x8F93;&#x51FA; y, [N, C, H, W]</li>
<li>&#x5747;&#x503C; $\mu_B$&#xFF0C;[C, ]</li>
<li>&#x65B9;&#x5DEE;$\sigma_B^2$, [C, ]</li>
<li>&#x7F29;&#x653E;&#x53C2;&#x6570;$\gamma$, [C, ]</li>
<li>&#x5E73;&#x79FB;&#x53C2;&#x6570;$\beta$, [C, ]</li>
</ul>
<hr>
<p><strong>&#x5C0F;&#x7A8D;&#x95E8;&#xFF1A;</strong></p>
<p>&#x53EF;&#x80FD;&#x6709;&#x8BFB;&#x8005;&#x4F1A;&#x95EE;&#xFF1A;&#x201C;BatchNorm&#x91CC;&#x9762;&#x4E0D;&#x662F;&#x8FD8;&#x8981;&#x5BF9;&#x6807;&#x51C6;&#x5316;&#x4E4B;&#x540E;&#x7684;&#x7ED3;&#x679C;&#x505A;&#x4EFF;&#x5C04;&#x53D8;&#x6362;&#x5417;&#xFF0C;&#x600E;&#x4E48;&#x4F7F;&#x7528;Numpy&#x8BA1;&#x7B97;&#x7684;&#x7ED3;&#x679C;&#x4E0E;BatchNorm&#x7B97;&#x5B50;&#x4E00;&#x81F4;&#xFF1F;&#x201D; &#x8FD9;&#x662F;&#x56E0;&#x4E3A;BatchNorm&#x7B97;&#x5B50;&#x91CC;&#x9762;&#x81EA;&#x52A8;&#x8BBE;&#x7F6E;&#x521D;&#x59CB;&#x503C;&#x3B3;=1,&#x3B2;=0\gamma = 1, \beta = 0<em>&#x3B3;</em>=1,<em>&#x3B2;</em>=0&#xFF0C;&#x8FD9;&#x65F6;&#x5019;&#x4EFF;&#x5C04;&#x53D8;&#x6362;&#x76F8;&#x5F53;&#x4E8E;&#x662F;&#x6052;&#x7B49;&#x53D8;&#x6362;&#x3002;&#x5728;&#x8BAD;&#x7EC3;&#x8FC7;&#x7A0B;&#x4E2D;&#x8FD9;&#x4E24;&#x4E2A;&#x53C2;&#x6570;&#x4F1A;&#x4E0D;&#x65AD;&#x7684;&#x5B66;&#x4E60;&#xFF0C;&#x8FD9;&#x65F6;&#x4EFF;&#x5C04;&#x53D8;&#x6362;&#x5C31;&#x4F1A;&#x8D77;&#x4F5C;&#x7528;&#x3002;</p>
<hr>
<pre><code># &#x8F93;&#x5165;&#x6570;&#x636E;&#x5F62;&#x72B6;&#x662F;[N, C, H, W]&#x65F6;&#x7684;batchnorm&#x793A;&#x4F8B;
import numpy as np
import paddle
from paddle.nn import BatchNorm2D

# &#x8BBE;&#x7F6E;&#x968F;&#x673A;&#x6570;&#x79CD;&#x5B50;&#xFF0C;&#x8FD9;&#x6837;&#x53EF;&#x4EE5;&#x4FDD;&#x8BC1;&#x6BCF;&#x6B21;&#x8FD0;&#x884C;&#x7ED3;&#x679C;&#x4E00;&#x81F4;
np.random.seed(100)
# &#x521B;&#x5EFA;&#x6570;&#x636E;
data = np.random.rand(2,3,3,3).astype(&apos;float32&apos;)
# &#x4F7F;&#x7528;BatchNorm2D&#x8BA1;&#x7B97;&#x5F52;&#x4E00;&#x5316;&#x7684;&#x8F93;&#x51FA;
# &#x8F93;&#x5165;&#x6570;&#x636E;&#x7EF4;&#x5EA6;[N, C, H, W]&#xFF0C;num_features&#x7B49;&#x4E8E;C
bn = BatchNorm2D(num_features=3)
x = paddle.to_tensor(data)
y = bn(x)
print(&apos;input of BatchNorm2D Layer: \n {}&apos;.format(x.numpy()))
print(&apos;output of BatchNorm2D Layer: \n {}&apos;.format(y.numpy()))

# &#x53D6;&#x51FA;data&#x4E2D;&#x7B2C;0&#x901A;&#x9053;&#x7684;&#x6570;&#x636E;&#xFF0C;
# &#x4F7F;&#x7528;numpy&#x8BA1;&#x7B97;&#x5747;&#x503C;&#x3001;&#x65B9;&#x5DEE;&#x53CA;&#x5F52;&#x4E00;&#x5316;&#x7684;&#x8F93;&#x51FA;
a = data[:, 0, :, :]
a_mean = a.mean()
a_std = a.std()
b = (a - a_mean) / a_std
print(&apos;channel 0 of input data: \n {}&apos;.format(a))
print(&apos;std {}, mean {}, \n output: \n {}&apos;.format(a_mean, a_std, b))

# &#x63D0;&#x793A;&#xFF1A;&#x8FD9;&#x91CC;&#x901A;&#x8FC7;numpy&#x8BA1;&#x7B97;&#x51FA;&#x6765;&#x7684;&#x8F93;&#x51FA;
# &#x4E0E;BatchNorm2D&#x7B97;&#x5B50;&#x7684;&#x7ED3;&#x679C;&#x7565;&#x6709;&#x5DEE;&#x522B;&#xFF0C;
# &#x56E0;&#x4E3A;&#x5728;BatchNorm2D&#x7B97;&#x5B50;&#x4E3A;&#x4E86;&#x4FDD;&#x8BC1;&#x6570;&#x503C;&#x7684;&#x7A33;&#x5B9A;&#x6027;&#xFF0C;
# &#x5728;&#x5206;&#x6BCD;&#x91CC;&#x9762;&#x52A0;&#x4E0A;&#x4E86;&#x4E00;&#x4E2A;&#x6BD4;&#x8F83;&#x5C0F;&#x7684;&#x6D6E;&#x70B9;&#x6570;epsilon=1e-05
</code></pre><p><strong>- &#x9884;&#x6D4B;&#x65F6;&#x4F7F;&#x7528;BatchNorm</strong></p>
<p>&#x4E0A;&#x9762;&#x4ECB;&#x7ECD;&#x4E86;&#x5728;&#x8BAD;&#x7EC3;&#x8FC7;&#x7A0B;&#x4E2D;&#x4F7F;&#x7528;BatchNorm&#x5BF9;&#x4E00;&#x6279;&#x6837;&#x672C;&#x8FDB;&#x884C;&#x5F52;&#x4E00;&#x5316;&#x7684;&#x65B9;&#x6CD5;&#xFF0C;&#x4F46;&#x5982;&#x679C;&#x4F7F;&#x7528;&#x540C;&#x6837;&#x7684;&#x65B9;&#x6CD5;&#x5BF9;&#x9700;&#x8981;&#x9884;&#x6D4B;&#x7684;&#x4E00;&#x6279;&#x6837;&#x672C;&#x8FDB;&#x884C;&#x5F52;&#x4E00;&#x5316;&#xFF0C;&#x5219;&#x9884;&#x6D4B;&#x7ED3;&#x679C;&#x4F1A;&#x51FA;&#x73B0;&#x4E0D;&#x786E;&#x5B9A;&#x6027;&#x3002;</p>
<p>&#x4F8B;&#x5982;&#x6837;&#x672C;A&#x3001;&#x6837;&#x672C;B&#x4F5C;&#x4E3A;&#x4E00;&#x6279;&#x6837;&#x672C;&#x8BA1;&#x7B97;&#x5747;&#x503C;&#x548C;&#x65B9;&#x5DEE;&#xFF0C;&#x4E0E;&#x6837;&#x672C;A&#x3001;&#x6837;&#x672C;C&#x548C;&#x6837;&#x672C;D&#x4F5C;&#x4E3A;&#x4E00;&#x6279;&#x6837;&#x672C;&#x8BA1;&#x7B97;&#x5747;&#x503C;&#x548C;&#x65B9;&#x5DEE;&#xFF0C;&#x5F97;&#x5230;&#x7684;&#x7ED3;&#x679C;&#x4E00;&#x822C;&#x6765;&#x8BF4;&#x662F;&#x4E0D;&#x540C;&#x7684;&#x3002;&#x90A3;&#x4E48;&#x6837;&#x672C;A&#x7684;&#x9884;&#x6D4B;&#x7ED3;&#x679C;&#x5C31;&#x4F1A;&#x53D8;&#x5F97;&#x4E0D;&#x786E;&#x5B9A;&#xFF0C;&#x8FD9;&#x5BF9;&#x9884;&#x6D4B;&#x8FC7;&#x7A0B;&#x6765;&#x8BF4;&#x662F;&#x4E0D;&#x5408;&#x7406;&#x7684;&#x3002;&#x89E3;&#x51B3;&#x65B9;&#x6CD5;&#x662F;&#x5728;&#x8BAD;&#x7EC3;&#x8FC7;&#x7A0B;&#x4E2D;&#x5C06;&#x5927;&#x91CF;&#x6837;&#x672C;&#x7684;&#x5747;&#x503C;&#x548C;&#x65B9;&#x5DEE;&#x4FDD;&#x5B58;&#x4E0B;&#x6765;&#xFF0C;&#x9884;&#x6D4B;&#x65F6;&#x76F4;&#x63A5;&#x4F7F;&#x7528;&#x4FDD;&#x5B58;&#x597D;&#x7684;&#x503C;&#x800C;&#x4E0D;&#x518D;&#x91CD;&#x65B0;&#x8BA1;&#x7B97;&#x3002;&#x5B9E;&#x9645;&#x4E0A;&#xFF0C;&#x5728;BatchNorm&#x7684;&#x5177;&#x4F53;&#x5B9E;&#x73B0;&#x4E2D;&#xFF0C;&#x8BAD;&#x7EC3;&#x65F6;&#x4F1A;&#x8BA1;&#x7B97;&#x5747;&#x503C;&#x548C;&#x65B9;&#x5DEE;&#x7684;&#x79FB;&#x52A8;&#x5E73;&#x5747;&#x503C;&#x3002;&#x5728;&#x98DE;&#x6868;&#x4E2D;&#xFF0C;&#x9ED8;&#x8BA4;&#x662F;&#x91C7;&#x7528;&#x5982;&#x4E0B;&#x65B9;&#x5F0F;&#x8BA1;&#x7B97;&#xFF1A;</p>
<p>$$
saved_\mu<em>B \leftarrow \ saved\</em>\mu_B \times 0.9 + \mu_B \times (1 - 0.9)</p>
<p>$$</p>
<p>$$
saved_\sigma<em>B^2 \leftarrow \ saved\</em>\sigma_B^2 \times 0.9 + \sigma_B^2 \times (1 - 0.9)</p>
<p>$$</p>
<p>&#x5728;&#x8BAD;&#x7EC3;&#x8FC7;&#x7A0B;&#x7684;&#x6700;&#x5F00;&#x59CB;&#x5C06;$saved_\mu<em>B$&#x548C;$saved\</em>\sigma<em>B^2$&#x8BBE;&#x7F6E;&#x4E3A;0&#xFF0C;&#x6BCF;&#x6B21;&#x8F93;&#x5165;&#x4E00;&#x6279;&#x65B0;&#x7684;&#x6837;&#x672C;&#xFF0C;&#x8BA1;&#x7B97;&#x51FA;$\mu_B$&#x548C;$\sigma_B^2$&#xFF0C;&#x7136;&#x540E;&#x901A;&#x8FC7;&#x4E0A;&#x9762;&#x7684;&#x516C;&#x5F0F;&#x66F4;&#x65B0;$saved\</em>\mu<em>B$&#x548C;$saved\</em>\sigma<em>B^2$&#xFF0C;&#x5728;&#x8BAD;&#x7EC3;&#x7684;&#x8FC7;&#x7A0B;&#x4E2D;&#x4E0D;&#x65AD;&#x7684;&#x66F4;&#x65B0;&#x5B83;&#x4EEC;&#x7684;&#x503C;&#xFF0C;&#x5E76;&#x4F5C;&#x4E3A;BatchNorm&#x5C42;&#x7684;&#x53C2;&#x6570;&#x4FDD;&#x5B58;&#x4E0B;&#x6765;&#x3002;&#x9884;&#x6D4B;&#x7684;&#x65F6;&#x5019;&#x5C06;&#x4F1A;&#x52A0;&#x8F7D;&#x53C2;&#x6570;$saved\</em>\mu<em>B$&#x548C;$saved\</em>\sigma_B^2$&#xFF0C;&#x7528;&#x4ED6;&#x4EEC;&#x6765;&#x4EE3;&#x66FF;$\mu_B$&#x548C;$\sigma_B^2$&#x3002;</p>
<h2 id="&#x4E22;&#x5F03;&#x6CD5;&#xFF08;dropout&#xFF09;">&#x4E22;&#x5F03;&#x6CD5;&#xFF08;Dropout&#xFF09;</h2>
<p>&#x4E22;&#x5F03;&#x6CD5;&#xFF08;Dropout&#xFF09;&#x662F;&#x6DF1;&#x5EA6;&#x5B66;&#x4E60;&#x4E2D;&#x4E00;&#x79CD;&#x5E38;&#x7528;&#x7684;&#x6291;&#x5236;&#x8FC7;&#x62DF;&#x5408;&#x7684;&#x65B9;&#x6CD5;&#xFF0C;&#x5176;&#x505A;&#x6CD5;&#x662F;&#x5728;&#x795E;&#x7ECF;&#x7F51;&#x7EDC;&#x5B66;&#x4E60;&#x8FC7;&#x7A0B;&#x4E2D;&#xFF0C;&#x968F;&#x673A;&#x5220;&#x9664;&#x4E00;&#x90E8;&#x5206;&#x795E;&#x7ECF;&#x5143;&#x3002;&#x8BAD;&#x7EC3;&#x65F6;&#xFF0C;&#x968F;&#x673A;&#x9009;&#x51FA;&#x4E00;&#x90E8;&#x5206;&#x795E;&#x7ECF;&#x5143;&#xFF0C;&#x5C06;&#x5176;&#x8F93;&#x51FA;&#x8BBE;&#x7F6E;&#x4E3A;0&#xFF0C;&#x8FD9;&#x4E9B;&#x795E;&#x7ECF;&#x5143;&#x5C06;&#x4E0D;&#x5BF9;&#x5916;&#x4F20;&#x9012;&#x4FE1;&#x53F7;&#x3002;</p>
<p><strong>&#x56FE;16</strong> &#x662F;Dropout&#x793A;&#x610F;&#x56FE;&#xFF0C;&#x5DE6;&#x8FB9;&#x662F;&#x5B8C;&#x6574;&#x7684;&#x795E;&#x7ECF;&#x7F51;&#x7EDC;&#xFF0C;&#x53F3;&#x8FB9;&#x662F;&#x5E94;&#x7528;&#x4E86;Dropout&#x4E4B;&#x540E;&#x7684;&#x7F51;&#x7EDC;&#x7ED3;&#x6784;&#x3002;&#x5E94;&#x7528;Dropout&#x4E4B;&#x540E;&#xFF0C;&#x4F1A;&#x5C06;&#x6807;&#x4E86;$\times$&#x7684;&#x795E;&#x7ECF;&#x5143;&#x4ECE;&#x7F51;&#x7EDC;&#x4E2D;&#x5220;&#x9664;&#xFF0C;&#x8BA9;&#x5B83;&#x4EEC;&#x4E0D;&#x5411;&#x540E;&#x9762;&#x7684;&#x5C42;&#x4F20;&#x9012;&#x4FE1;&#x53F7;&#x3002;&#x5728;&#x5B66;&#x4E60;&#x8FC7;&#x7A0B;&#x4E2D;&#xFF0C;&#x4E22;&#x5F03;&#x54EA;&#x4E9B;&#x795E;&#x7ECF;&#x5143;&#x662F;&#x968F;&#x673A;&#x51B3;&#x5B9A;&#xFF0C;&#x56E0;&#x6B64;&#x6A21;&#x578B;&#x4E0D;&#x4F1A;&#x8FC7;&#x5EA6;&#x4F9D;&#x8D56;&#x67D0;&#x4E9B;&#x795E;&#x7ECF;&#x5143;&#xFF0C;&#x80FD;&#x4E00;&#x5B9A;&#x7A0B;&#x5EA6;&#x4E0A;&#x6291;&#x5236;&#x8FC7;&#x62DF;&#x5408;&#x3002;</p>
<p><img src="https://ai-studio-static-online.cdn.bcebos.com/2afb5379d93c46c6be802a1257236b5450d3d3a4a2454b36a5ffb4e005e468ec" alt="img"></p>
<p>&#x56FE;16 Dropout&#x793A;&#x610F;&#x56FE;</p>
<p>&#x5728;&#x9884;&#x6D4B;&#x573A;&#x666F;&#x65F6;&#xFF0C;&#x4F1A;&#x5411;&#x524D;&#x4F20;&#x9012;&#x6240;&#x6709;&#x795E;&#x7ECF;&#x5143;&#x7684;&#x4FE1;&#x53F7;&#xFF0C;&#x53EF;&#x80FD;&#x4F1A;&#x5F15;&#x51FA;&#x4E00;&#x4E2A;&#x65B0;&#x7684;&#x95EE;&#x9898;&#xFF1A;&#x8BAD;&#x7EC3;&#x65F6;&#x7531;&#x4E8E;&#x90E8;&#x5206;&#x795E;&#x7ECF;&#x5143;&#x88AB;&#x968F;&#x673A;&#x4E22;&#x5F03;&#x4E86;&#xFF0C;&#x8F93;&#x51FA;&#x6570;&#x636E;&#x7684;&#x603B;&#x5927;&#x5C0F;&#x4F1A;&#x53D8;&#x5C0F;&#x3002;&#x6BD4;&#x5982;&#xFF1A;&#x8BA1;&#x7B97;&#x5176;L1&#x8303;&#x6570;&#x4F1A;&#x6BD4;&#x4E0D;&#x4F7F;&#x7528;Dropout&#x65F6;&#x53D8;&#x5C0F;&#xFF0C;&#x4F46;&#x662F;&#x9884;&#x6D4B;&#x65F6;&#x5374;&#x6CA1;&#x6709;&#x4E22;&#x5F03;&#x795E;&#x7ECF;&#x5143;&#xFF0C;&#x8FD9;&#x5C06;&#x5BFC;&#x81F4;&#x8BAD;&#x7EC3;&#x548C;&#x9884;&#x6D4B;&#x65F6;&#x6570;&#x636E;&#x7684;&#x5206;&#x5E03;&#x4E0D;&#x4E00;&#x6837;&#x3002;&#x4E3A;&#x4E86;&#x89E3;&#x51B3;&#x8FD9;&#x4E2A;&#x95EE;&#x9898;&#xFF0C;&#x98DE;&#x6868;&#x652F;&#x6301;&#x5982;&#x4E0B;&#x4E24;&#x79CD;&#x65B9;&#x6CD5;&#xFF1A;</p>
<ul>
<li><strong>downscale_in_infer</strong></li>
</ul>
<p>&#x8BAD;&#x7EC3;&#x65F6;&#x4EE5;&#x6BD4;&#x4F8B;r&#x968F;&#x673A;&#x4E22;&#x5F03;&#x4E00;&#x90E8;&#x5206;&#x795E;&#x7ECF;&#x5143;&#xFF0C;&#x4E0D;&#x5411;&#x540E;&#x4F20;&#x9012;&#x5B83;&#x4EEC;&#x7684;&#x4FE1;&#x53F7;&#xFF1B;&#x9884;&#x6D4B;&#x65F6;&#x5411;&#x540E;&#x4F20;&#x9012;&#x6240;&#x6709;&#x795E;&#x7ECF;&#x5143;&#x7684;&#x4FE1;&#x53F7;&#xFF0C;&#x4F46;&#x662F;&#x5C06;&#x6BCF;&#x4E2A;&#x795E;&#x7ECF;&#x5143;&#x4E0A;&#x7684;&#x6570;&#x503C;&#x4E58;&#x4EE5; (1&#x2212;r)&#x3002;</p>
<ul>
<li><strong>upscale_in_train</strong></li>
</ul>
<p>&#x8BAD;&#x7EC3;&#x65F6;&#x4EE5;&#x6BD4;&#x4F8B;r&#x968F;&#x673A;&#x4E22;&#x5F03;&#x4E00;&#x90E8;&#x5206;&#x795E;&#x7ECF;&#x5143;&#xFF0C;&#x4E0D;&#x5411;&#x540E;&#x4F20;&#x9012;&#x5B83;&#x4EEC;&#x7684;&#x4FE1;&#x53F7;&#xFF0C;&#x4F46;&#x662F;&#x5C06;&#x90A3;&#x4E9B;&#x88AB;&#x4FDD;&#x7559;&#x7684;&#x795E;&#x7ECF;&#x5143;&#x4E0A;&#x7684;&#x6570;&#x503C;&#x9664;&#x4EE5; (1&#x2212;r)&#xFF1B;&#x9884;&#x6D4B;&#x65F6;&#x5411;&#x540E;&#x4F20;&#x9012;&#x6240;&#x6709;&#x795E;&#x7ECF;&#x5143;&#x7684;&#x4FE1;&#x53F7;&#xFF0C;&#x4E0D;&#x505A;&#x4EFB;&#x4F55;&#x5904;&#x7406;&#x3002;</p>
<p>&#x5728;&#x98DE;&#x6868;<a href="https://www.paddlepaddle.org.cn/documentation/docs/zh/api/paddle/nn/Dropout_cn.html" target="_blank">Dropout API</a>&#x4E2D;&#xFF0C;&#x901A;&#x8FC7;mode&#x53C2;&#x6570;&#x6765;&#x6307;&#x5B9A;&#x7528;&#x54EA;&#x79CD;&#x65B9;&#x5F0F;&#x5BF9;&#x795E;&#x7ECF;&#x5143;&#x8FDB;&#x884C;&#x64CD;&#x4F5C;&#xFF0C;</p>
<blockquote>
<p>paddle.nn.Dropout(p=0.5, axis=None, mode=&quot;upscale_in_train&#x201D;, name=None)</p>
</blockquote>
<p>&#x4E3B;&#x8981;&#x53C2;&#x6570;&#x5982;&#x4E0B;&#xFF1A;</p>
<ul>
<li>p (float) &#xFF1A;&#x5C06;&#x8F93;&#x5165;&#x8282;&#x70B9;&#x7F6E;&#x4E3A;0&#x7684;&#x6982;&#x7387;&#xFF0C;&#x5373;&#x4E22;&#x5F03;&#x6982;&#x7387;&#xFF0C;&#x9ED8;&#x8BA4;&#x503C;&#xFF1A;0.5&#x3002;&#x8BE5;&#x53C2;&#x6570;&#x5BF9;&#x5143;&#x7D20;&#x7684;&#x4E22;&#x5F03;&#x6982;&#x7387;&#x662F;&#x9488;&#x5BF9;&#x4E8E;&#x6BCF;&#x4E00;&#x4E2A;&#x5143;&#x7D20;&#x800C;&#x8A00;&#xFF0C;&#x800C;&#x4E0D;&#x662F;&#x5BF9;&#x6240;&#x6709;&#x7684;&#x5143;&#x7D20;&#x800C;&#x8A00;&#x3002;&#x4E3E;&#x4F8B;&#x8BF4;&#xFF0C;&#x5047;&#x8BBE;&#x77E9;&#x9635;&#x5185;&#x6709;12&#x4E2A;&#x6570;&#x5B57;&#xFF0C;&#x7ECF;&#x8FC7;&#x6982;&#x7387;&#x4E3A;0.5&#x7684;dropout&#x672A;&#x5FC5;&#x4E00;&#x5B9A;&#x6709;6&#x4E2A;&#x96F6;&#x3002;</li>
<li>mode(str) &#xFF1A;&#x4E22;&#x5F03;&#x6CD5;&#x7684;&#x5B9E;&#x73B0;&#x65B9;&#x5F0F;&#xFF0C;&#x6709;&#x2019;downscale_in_infer&#x2019;&#x548C;&#x2019;upscale_in_train&#x2019;&#x4E24;&#x79CD;&#xFF0C;&#x9ED8;&#x8BA4;&#x662F;&#x2019;upscale_in_train&#x2019;&#x3002;</li>
</ul>
<hr>
<p><strong>&#x8BF4;&#x660E;&#xFF1A;</strong></p>
<p>&#x4E0D;&#x540C;&#x6846;&#x67B6;&#x5BF9;&#x4E8E;Dropout&#x7684;&#x9ED8;&#x8BA4;&#x5904;&#x7406;&#x65B9;&#x5F0F;&#x53EF;&#x80FD;&#x4E0D;&#x540C;&#xFF0C;&#x8BFB;&#x8005;&#x53EF;&#x4EE5;&#x67E5;&#x770B;API&#x8BE6;&#x7EC6;&#x4E86;&#x89E3;&#x3002;</p>
<hr>
<p>&#x4E0B;&#x9762;&#x8FD9;&#x6BB5;&#x7A0B;&#x5E8F;&#x5C55;&#x793A;&#x4E86;&#x7ECF;&#x8FC7;Dropout&#x4E4B;&#x540E;&#x8F93;&#x51FA;&#x6570;&#x636E;&#x7684;&#x5F62;&#x5F0F;&#x3002;</p>
<pre><code># dropout&#x64CD;&#x4F5C;
import paddle
import numpy as np

# &#x8BBE;&#x7F6E;&#x968F;&#x673A;&#x6570;&#x79CD;&#x5B50;&#xFF0C;&#x8FD9;&#x6837;&#x53EF;&#x4EE5;&#x4FDD;&#x8BC1;&#x6BCF;&#x6B21;&#x8FD0;&#x884C;&#x7ED3;&#x679C;&#x4E00;&#x81F4;
np.random.seed(100)
# &#x521B;&#x5EFA;&#x6570;&#x636E;[N, C, H, W]&#xFF0C;&#x4E00;&#x822C;&#x5BF9;&#x5E94;&#x5377;&#x79EF;&#x5C42;&#x7684;&#x8F93;&#x51FA;
data1 = np.random.rand(2,3,3,3).astype(&apos;float32&apos;)
# &#x521B;&#x5EFA;&#x6570;&#x636E;[N, K]&#xFF0C;&#x4E00;&#x822C;&#x5BF9;&#x5E94;&#x5168;&#x8FDE;&#x63A5;&#x5C42;&#x7684;&#x8F93;&#x51FA;
data2 = np.arange(1,13).reshape([-1, 3]).astype(&apos;float32&apos;)
# &#x4F7F;&#x7528;dropout&#x4F5C;&#x7528;&#x5728;&#x8F93;&#x5165;&#x6570;&#x636E;&#x4E0A;
x1 = paddle.to_tensor(data1)
# downgrade_in_infer&#x6A21;&#x5F0F;&#x4E0B;
drop11 = paddle.nn.Dropout(p = 0.5, mode = &apos;downscale_in_infer&apos;)
droped_train11 = drop11(x1)
# &#x5207;&#x6362;&#x5230;eval&#x6A21;&#x5F0F;&#x3002;&#x5728;&#x52A8;&#x6001;&#x56FE;&#x6A21;&#x5F0F;&#x4E0B;&#xFF0C;&#x4F7F;&#x7528;eval&#xFF08;&#xFF09;&#x5207;&#x6362;&#x5230;&#x6C42;&#x503C;&#x6A21;&#x5F0F;&#xFF0C;&#x8BE5;&#x6A21;&#x5F0F;&#x7981;&#x7528;&#x4E86;dropout&#x3002;
drop11.eval()
droped_eval11 = drop11(x1)
# upscale_in_train&#x6A21;&#x5F0F;&#x4E0B;
drop12 = paddle.nn.Dropout(p = 0.5, mode = &apos;upscale_in_train&apos;)
droped_train12 = drop12(x1)
# &#x5207;&#x6362;&#x5230;eval&#x6A21;&#x5F0F;
drop12.eval()
droped_eval12 = drop12(x1)

x2 = paddle.to_tensor(data2)
drop21 = paddle.nn.Dropout(p = 0.5, mode = &apos;downscale_in_infer&apos;)
droped_train21 = drop21(x2)
# &#x5207;&#x6362;&#x5230;eval&#x6A21;&#x5F0F;
drop21.eval()
droped_eval21 = drop21(x2)
drop22 = paddle.nn.Dropout(p = 0.5, mode = &apos;upscale_in_train&apos;)
droped_train22 = drop22(x2)
# &#x5207;&#x6362;&#x5230;eval&#x6A21;&#x5F0F;
drop22.eval()
droped_eval22 = drop22(x2)

print(&apos;x1 {}, \n droped_train11 \n {}, \n droped_eval11 \n {}&apos;.format(data1, droped_train11.numpy(),  droped_eval11.numpy()))
print(&apos;x1 {}, \n droped_train12 \n {}, \n droped_eval12 \n {}&apos;.format(data1, droped_train12.numpy(),  droped_eval12.numpy()))
print(&apos;x2 {}, \n droped_train21 \n {}, \n droped_eval21 \n {}&apos;.format(data2, droped_train21.numpy(),  droped_eval21.numpy()))
print(&apos;x2 {}, \n droped_train22 \n {}, \n droped_eval22 \n {}&apos;.format(data2, droped_train22.numpy(),  droped_eval22.numpy()))
</code></pre><p>&#x4ECE;&#x4E0A;&#x8FF0;&#x4EE3;&#x7801;&#x7684;&#x8F93;&#x51FA;&#x53EF;&#x4EE5;&#x53D1;&#x73B0;&#xFF0C;&#x7ECF;&#x8FC7;dropout&#x4E4B;&#x540E;&#xFF0C;tensor&#x4E2D;&#x7684;&#x67D0;&#x4E9B;&#x5143;&#x7D20;&#x53D8;&#x4E3A;&#x4E86;0&#xFF0C;&#x8FD9;&#x4E2A;&#x5C31;&#x662F;dropout&#x5B9E;&#x73B0;&#x7684;&#x529F;&#x80FD;&#xFF0C;&#x901A;&#x8FC7;&#x968F;&#x673A;&#x5C06;&#x8F93;&#x5165;&#x6570;&#x636E;&#x7684;&#x5143;&#x7D20;&#x7F6E;0&#xFF0C;&#x6D88;&#x9664;&#x51CF;&#x5F31;&#x4E86;&#x795E;&#x7ECF;&#x5143;&#x8282;&#x70B9;&#x95F4;&#x7684;&#x8054;&#x5408;&#x9002;&#x5E94;&#x6027;&#xFF0C;&#x589E;&#x5F3A;&#x6A21;&#x578B;&#x7684;&#x6CDB;&#x5316;&#x80FD;&#x529B;&#x3002;</p>
<h1 id="&#x5C0F;&#x7ED3;">&#x5C0F;&#x7ED3;</h1>
<p>&#x5B66;&#x4E60;&#x5B8C;&#x8FD9;&#x4E9B;&#x6982;&#x5FF5;&#xFF0C;&#x60A8;&#x5C31;&#x5177;&#x5907;&#x4E86;&#x642D;&#x5EFA;&#x5377;&#x79EF;&#x795E;&#x7ECF;&#x7F51;&#x7EDC;&#x7684;&#x57FA;&#x7840;&#x3002;&#x4E0B;&#x4E00;&#x8282;&#xFF0C;&#x6211;&#x4EEC;&#x5C06;&#x5E94;&#x7528;&#x8FD9;&#x4E9B;&#x57FA;&#x7840;&#x6A21;&#x5757;&#xFF0C;&#x4E00;&#x8D77;&#x5B8C;&#x6210;&#x56FE;&#x50CF;&#x5206;&#x7C7B;&#x4E2D;&#x7684;&#x5178;&#x578B;&#x5E94;&#x7528; &#x2014; &#x533B;&#x7597;&#x56FE;&#x50CF;&#x4E2D;&#x7684;&#x773C;&#x75BE;&#x7B5B;&#x67E5;&#x4EFB;&#x52A1;&#x7684;&#x6A21;&#x578B;&#x642D;&#x5EFA;&#x3002;</p>
<h1 id="&#x4F5C;&#x4E1A;">&#x4F5C;&#x4E1A;</h1>
<h2 id="1-&#x8BA1;&#x7B97;&#x5377;&#x79EF;&#x4E2D;&#x4E00;&#x5171;&#x6709;&#x591A;&#x5C11;&#x6B21;&#x4E58;&#x6CD5;&#x548C;&#x52A0;&#x6CD5;&#x64CD;&#x4F5C;">1 &#x8BA1;&#x7B97;&#x5377;&#x79EF;&#x4E2D;&#x4E00;&#x5171;&#x6709;&#x591A;&#x5C11;&#x6B21;&#x4E58;&#x6CD5;&#x548C;&#x52A0;&#x6CD5;&#x64CD;&#x4F5C;</h2>
<p>&#x8F93;&#x5165;&#x6570;&#x636E;&#x5F62;&#x72B6;&#x662F;[10,3,224,224]&#xFF0C;&#x5377;&#x79EF;&#x6838;$k_h=k_w=3$&#xFF0C;&#x8F93;&#x51FA;&#x901A;&#x9053;&#x6570;&#x4E3A;64&#xFF0C;&#x6B65;&#x5E45;stride=1&#xFF0C;&#x586B;&#x5145;$p_h=p_w=1$&#x3002;</p>
<p>&#x5219;&#x5B8C;&#x6210;&#x8FD9;&#x6837;&#x4E00;&#x4E2A;&#x5377;&#x79EF;&#xFF0C;&#x4E00;&#x5171;&#x9700;&#x8981;&#x505A;&#x591A;&#x5C11;&#x6B21;&#x4E58;&#x6CD5;&#x548C;&#x52A0;&#x6CD5;&#x64CD;&#x4F5C;&#xFF1F;</p>
<ul>
<li>&#x63D0;&#x793A;</li>
</ul>
<p>&#x5148;&#x770B;&#x8F93;&#x51FA;&#x4E00;&#x4E2A;&#x50CF;&#x7D20;&#x70B9;&#x9700;&#x8981;&#x505A;&#x591A;&#x5C11;&#x6B21;&#x4E58;&#x6CD5;&#x548C;&#x52A0;&#x6CD5;&#x64CD;&#x4F5C;&#xFF0C;&#x7136;&#x540E;&#x518D;&#x8BA1;&#x7B97;&#x603B;&#x5171;&#x9700;&#x8981;&#x7684;&#x64CD;&#x4F5C;&#x6B21;&#x6570;&#x3002;</p>
<ul>
<li>&#x63D0;&#x4EA4;&#x65B9;&#x5F0F;</li>
</ul>
<p>&#x8BF7;&#x56DE;&#x590D;&#x4E58;&#x6CD5;&#x548C;&#x52A0;&#x6CD5;&#x64CD;&#x4F5C;&#x7684;&#x6B21;&#x6570;&#xFF0C;&#x4F8B;&#x5982;&#xFF1A;&#x4E58;&#x6CD5;1000&#xFF0C;&#x52A0;&#x6CD5;1000</p>
<h2 id="2-&#x8BA1;&#x7B97;&#x7F51;&#x7EDC;&#x5C42;&#x7684;&#x8F93;&#x51FA;&#x6570;&#x636E;&#x548C;&#x53C2;&#x6570;&#x7684;&#x5F62;&#x72B6;">2 &#x8BA1;&#x7B97;&#x7F51;&#x7EDC;&#x5C42;&#x7684;&#x8F93;&#x51FA;&#x6570;&#x636E;&#x548C;&#x53C2;&#x6570;&#x7684;&#x5F62;&#x72B6;</h2>
<p>&#x7F51;&#x7EDC;&#x7ED3;&#x6784;&#x5B9A;&#x4E49;&#x5982;&#x4E0B;&#x9762;&#x7684;&#x4EE3;&#x7801;&#x6240;&#x793A;&#xFF0C;&#x8F93;&#x5165;&#x6570;&#x636E;&#x5F62;&#x72B6;&#x662F;[10,3,224,224]&#xFF0C;</p>
<p>&#x8BF7;&#x5206;&#x522B;&#x8BA1;&#x7B97;&#x6BCF;&#x4E00;&#x5C42;&#x7684;&#x8F93;&#x51FA;&#x6570;&#x636E;&#x5F62;&#x72B6;&#xFF0C;&#x4EE5;&#x53CA;&#x5404;&#x5C42;&#x5305;&#x542B;&#x7684;&#x53C2;&#x6570;&#x5F62;&#x72B6;</p>
<pre><code class="lang-python"><span class="hljs-comment"># &#x5B9A;&#x4E49; SimpleNet &#x7F51;&#x7EDC;&#x7ED3;&#x6784;</span>
<span class="hljs-keyword">import</span> paddle
<span class="hljs-keyword">from</span> paddle.nn <span class="hljs-keyword">import</span> Conv2D, MaxPool2D, Linear
<span class="hljs-keyword">import</span> paddle.nn.functional <span class="hljs-keyword">as</span> F

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">SimpleNet</span><span class="hljs-params">(paddle.nn.Layer)</span>:</span>
    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">__init__</span><span class="hljs-params">(self, num_classes=<span class="hljs-number">1</span>)</span>:</span>
        <span class="hljs-comment">#super(SimpleNet, self).__init__(name_scope)</span>
        self.conv1 = Conv2D(in_channels=<span class="hljs-number">3</span>, out_channels=<span class="hljs-number">6</span>, kernel_size=<span class="hljs-number">5</span>, stride=<span class="hljs-number">1</span>, padding=<span class="hljs-number">2</span>)
        self.max_pool1 = MaxPool2D(kernel_size=<span class="hljs-number">2</span>, tride=<span class="hljs-number">2</span>)
        self.conv2 = Conv2D(in_channels=<span class="hljs-number">6</span>, out_channels=<span class="hljs-number">16</span>, kernel_size=<span class="hljs-number">5</span>, stride=<span class="hljs-number">1</span>, padding=<span class="hljs-number">2</span>)
        self.max_pool2 = MaxPool2D(kernel_size=<span class="hljs-number">2</span>, tride=<span class="hljs-number">2</span>)
        self.fc1 = Linear(in_features=<span class="hljs-number">50176</span>, out_features=<span class="hljs-number">64</span>)
        self.fc2 = Linear(in_features=<span class="hljs-number">64</span>, out_features=num_classes)        

    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">forward</span><span class="hljs-params">(self, x)</span>:</span>
        x = self.conv1(x)
        x = F.relu(x)
        x = self.max_pool1(x)
        x = self.conv2(x)
        x = F.relu(x)
        x = self.max_pool2(x)
        x = paddle.reshape(x, [x.shape[<span class="hljs-number">0</span>], <span class="hljs-number">-1</span>])
        x = self.fc1(x)
        x = F.sigmoid(x)
        x = self.fc2(x)
        <span class="hljs-keyword">return</span> x
</code></pre>
<ul>
<li>&#x63D0;&#x793A;&#xFF0C;&#x7B2C;&#x4E00;&#x5C42;&#x5377;&#x79EF;conv1&#xFF0C;&#x5404;&#x9879;&#x53C2;&#x6570;&#x5982;&#x4E0B;&#xFF1A;</li>
</ul>
<p>$$
C<em>{in} = 3, C</em>{out} = 6, k_h = k_w = 5, p_h = p_w = 2, stride = 1</p>
<p>$$</p>
<p>&#x5219;&#x5377;&#x79EF;&#x6838;&#x6743;&#x91CD;&#x53C2;&#x6570;w&#x7684;&#x5F62;&#x72B6;&#x662F;&#xFF1A;$[C<em>{out},C</em>{in},k_h,K_w]$=[6,3,5,5]&#xFF0C;&#x4E2A;&#x6570;6&#xD7;3&#xD7;5&#xD7;5=450</p>
<p>&#x504F;&#x7F6E;&#x53C2;&#x6570;b&#x7684;&#x5F62;&#x72B6;&#x662F;&#xFF1A;$C_{out}$&#xFF0C;&#x504F;&#x7F6E;&#x53C2;&#x6570;&#x7684;&#x4E2A;&#x6570;&#x662F;6</p>
<p>&#x8F93;&#x51FA;&#x7279;&#x5F81;&#x56FE;&#x7684;&#x5927;&#x5C0F;&#x662F;&#xFF1A;</p>
<p>$$
H<em>{out} = 224 + 2\times2 - 5 + 1 = 224, \ \ \ \ \ W</em>{out} = 224 + 2\times2 - 5 + 1 = 224</p>
<p>$$</p>
<p>&#x8F93;&#x51FA;&#x7279;&#x5F81;&#x56FE;&#x7684;&#x5F62;&#x72B6;&#x662F;$[N,C<em>{out},H</em>{out},W_{out}]=[10,6,224,224]$</p>
<p>&#x8BF7;&#x5C06;&#x4E0B;&#x9762;&#x7684;&#x8868;&#x683C;&#x8865;&#x5145;&#x5B8C;&#x6574;&#xFF1A;</p>
<table>
<thead>
<tr>
<th style="text-align:center">&#x540D;&#x79F0;</th>
<th style="text-align:center">w&#x5F62;&#x72B6;</th>
<th style="text-align:center">w&#x53C2;&#x6570;&#x4E2A;&#x6570;</th>
<th style="text-align:center">b&#x5F62;&#x72B6;</th>
<th style="text-align:center">b&#x53C2;&#x6570;&#x4E2A;&#x6570;</th>
<th style="text-align:center">&#x8F93;&#x51FA;&#x5F62;&#x72B6;</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">conv1</td>
<td style="text-align:center">[6,3,5,5]</td>
<td style="text-align:center">450</td>
<td style="text-align:center">[6]</td>
<td style="text-align:center">6</td>
<td style="text-align:center">[10, 6, 224, 224]</td>
</tr>
<tr>
<td style="text-align:center">pool1</td>
<td style="text-align:center">&#x65E0;</td>
<td style="text-align:center">&#x65E0;</td>
<td style="text-align:center">&#x65E0;</td>
<td style="text-align:center">&#x65E0;</td>
<td style="text-align:center">[10, 6, 112, 112]</td>
</tr>
<tr>
<td style="text-align:center">conv2</td>
<td style="text-align:center">[16,6,5,5]</td>
<td style="text-align:center">2400</td>
<td style="text-align:center">[16]</td>
<td style="text-align:center">16</td>
<td style="text-align:center">[10,16,112,112]</td>
</tr>
<tr>
<td style="text-align:center">pool2</td>
<td style="text-align:center">&#x65E0;</td>
<td style="text-align:center">&#x65E0;</td>
<td style="text-align:center">&#x65E0;</td>
<td style="text-align:center">&#x65E0;</td>
<td style="text-align:center">[10,16,56,56]</td>
</tr>
<tr>
<td style="text-align:center">fc1</td>
<td style="text-align:center">[50176,64]</td>
<td style="text-align:center">3211264</td>
<td style="text-align:center">[64]</td>
<td style="text-align:center">[64]</td>
<td style="text-align:center">[10,64]</td>
</tr>
<tr>
<td style="text-align:center">fc2</td>
<td style="text-align:center">[64,num_classes]</td>
<td style="text-align:center"></td>
<td style="text-align:center"></td>
<td style="text-align:center"></td>
<td style="text-align:center">[10,num_classes]</td>
</tr>
</tbody>
</table>
<ul>
<li>&#x63D0;&#x4EA4;&#x65B9;&#x5F0F;&#xFF1A;&#x5C06;&#x8868;&#x683C;&#x622A;&#x56FE;&#x53D1;&#x5230;&#x8BA8;&#x8BBA;&#x533A;</li>
</ul>

                                
                                </section>
                            
    </div>
    <div class="search-results">
        <div class="has-results">
            
            <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
            <ul class="search-results-list"></ul>
            
        </div>
        <div class="no-results">
            
            <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
            
        </div>
    </div>
</div>

                        </div>
                    </div>
                
            </div>

            
                
                <a href="手写数字识别代码.html" class="navigation navigation-prev navigation-unique" aria-label="Previous page: 实现手写数字识别代码">
                    <i class="fa fa-angle-left"></i>
                </a>
                
                
            
        
    </div>

    <script>
        var gitbook = gitbook || [];
        gitbook.push(function() {
            gitbook.page.hasChanged({"page":{"title":"卷积神经网络","level":"1.2.3","depth":2,"next":{"title":"图像分类","level":"1.2.4","depth":2,"ref":"","articles":[]},"previous":{"title":"实现手写数字识别代码","level":"1.2.2","depth":2,"path":"pdpd/手写数字识别代码.md","ref":"pdpd/手写数字识别代码.md","articles":[]},"dir":"ltr"},"config":{"gitbook":"*","theme":"default","variables":{},"plugins":["chapter-fold","livereload"],"pluginsConfig":{"chapter-fold":{},"livereload":{},"highlight":{},"search":{},"lunr":{"maxIndexSize":1000000,"ignoreSpecialCharacters":false},"sharing":{"facebook":true,"twitter":true,"google":false,"weibo":false,"instapaper":false,"vk":false,"all":["facebook","google","twitter","weibo","instapaper"]},"fontsettings":{"theme":"white","family":"sans","size":2},"theme-default":{"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"showLevel":false}},"structure":{"langs":"LANGS.md","readme":"README.md","glossary":"GLOSSARY.md","summary":"SUMMARY.md"},"pdf":{"pageNumbers":true,"fontSize":12,"fontFamily":"Arial","paperSize":"a4","chapterMark":"pagebreak","pageBreaksBefore":"/","margin":{"right":62,"left":62,"top":56,"bottom":56}},"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"}},"file":{"path":"pdpd/卷积神经网络.md","mtime":"2022-02-26T05:37:52.295Z","type":"markdown"},"gitbook":{"version":"3.2.3","time":"2022-02-26T06:28:45.468Z"},"basePath":"..","book":{"language":""}});
        });
    </script>
</div>

        
    <script src="../gitbook/gitbook.js"></script>
    <script src="../gitbook/theme.js"></script>
    
        
        <script src="../gitbook/gitbook-plugin-chapter-fold/chapter-fold.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-livereload/plugin.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-search/search-engine.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-search/search.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-lunr/lunr.min.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-lunr/search-lunr.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-sharing/buttons.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-fontsettings/fontsettings.js"></script>
        
    

    </body>
</html>

